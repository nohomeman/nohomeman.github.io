<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="NoHomeMan个人站，主要涉及前端知识共享、实践教程、前沿技术共同学习等方面">
<meta name="keywords" content="NoHomeMan,个人站,前端,知识分享,实践教程">
<meta property="og:type" content="website">
<meta property="og:title" content="NoHomeMan">
<meta property="og:url" content="http://nohomeman.github.io/index.html">
<meta property="og:site_name" content="NoHomeMan">
<meta property="og:description" content="NoHomeMan个人站，主要涉及前端知识共享、实践教程、前沿技术共同学习等方面">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NoHomeMan">
<meta name="twitter:description" content="NoHomeMan个人站，主要涉及前端知识共享、实践教程、前沿技术共同学习等方面">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://nohomeman.github.io/"/>





  <title>NoHomeMan</title>
  








</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">NoHomeMan</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不忘初心,方得始终！</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nohomeman.github.io/拥抱2019/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="NoHomeMan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/background.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoHomeMan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/拥抱2019/" itemprop="url">拥抱2019</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-25T14:42:50+08:00">
                2018-12-25
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/拥抱2019/#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://nohomeman.github.io/拥抱2019/" class="cy_cmt_count" data-xid="拥抱2019/" itemprop="commentsCount" ></span>
                </a>
              
            
          

          
          
             <span id="/拥抱2019/" class="leancloud_visitors" data-flag-title="拥抱2019">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
             <span class="post-meta-divider">|</span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  775
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;今天是圣诞节，转眼就要迎来2019年的到来了。有时候想想，不禁感叹一下。啊！时间可过得可真快啊！<br>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在这里就说说2018年我都做了些啥，2019我还要做些啥吧。自认为，自己在2018年还是成长了不少的（难免有些自恋哈…），其实吧，今年呢，写了三个项目。一个P2P的pc端和H5以及后台的管理、一个金融项目的H5和后台管理最后一个是公司内部运营的小程序和后台管理。全是用vue写的，感觉自己都成了资深的vue专家了，又是嵌App又是小程序又是后台管理又是前台pc（兼容到了ie9）。其实成长最多的还是P2P的这个项目，算是比较复杂的一个项目，里面的风控，以及各种权限的自定义配置。感觉学到了很多，PC客户端和H5是我一个人写的。各位如果有兴趣可以看看。<label style="color:orange">这里是pc端</label><a href="http://demo.sdqcjf.com" target="_blank" rel="noopener">点击这里</a>！<label style="color:orange">这里是h5端</label><a href="http://h5.yiwenhr.com" target="_blank" rel="noopener">点击这里</a>！这个P2P项目连带着后台管理做了半年了。这个项目的客户端，我定义了很多可复用的组件，所以维护起来特别快捷。后台的管理系统这里就不贴出来了，后台的这一套也是用vue，但是有点非主流，因为我还没来的时候，这家公司的老大以前是写php的会点前端，用的一个特别古老的sea.js进行的开发。没用用webpack，然后后台只能写es5特别蛋疼。当时改兼容算是噩梦了，当然pc客户端同样是噩梦，上传功能由于改flash所以就发着，其他的一些ajax的一些300问题，css的flex不兼容问题，还有最坑的一个table的html渲染问题这个我印象深刻！h5倒还好，没有改多少。P2P项目的客户端，让我学会灵活的使用vue给我提供的各种api，然后感受到vue-router、vuex给我们提供的各种方便。这里就不细说了。（其实当时pc客户端打算用nuxt的，但是老大说没有这个必要就没有用。）<br>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这个项目之后到7月份闲了一段时候，自己看了看小程序。照着之前那个h5撸了一遍大概一个月不到吧，感觉小程序没有vue写的爽，template用的不爽。后来就想，如果能用vue和h5写小程序就爽了，一查还真有美团的mpvue,之后就大概了解了一下。后续的有一个内部运营的项目，有一个小程序的，当时就用了mpvue写起来那叫一个舒服，听说还可打包成h5。因为没用到就没研究！<br>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过这一系列的项目，以及我业余时间的学习，算是对js原生和vue这一系列知识有了一个系统的了解。愿明年、我在web前端这个岗位放光发热！</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  <div>
    
  </div>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nohomeman.github.io/基于mpVue写了一个企业运营管理项目/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="NoHomeMan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/background.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoHomeMan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/基于mpVue写了一个企业运营管理项目/" itemprop="url">基于mpVue写了一个企业运营管理项目</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-10T14:17:30+08:00">
                2018-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/小程序/" itemprop="url" rel="index">
                    <span itemprop="name">小程序</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/基于mpVue写了一个企业运营管理项目/#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://nohomeman.github.io/基于mpVue写了一个企业运营管理项目/" class="cy_cmt_count" data-xid="基于mpVue写了一个企业运营管理项目/" itemprop="commentsCount" ></span>
                </a>
              
            
          

          
          
             <span id="/基于mpVue写了一个企业运营管理项目/" class="leancloud_visitors" data-flag-title="基于mpVue写了一个企业运营管理项目">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
             <span class="post-meta-divider">|</span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  890
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>  接近两个月没有更新博客了，上一个月一直在写一个小程序的项目，因为本人一直都是写vue也没怎么写过小程序，所以在网上看了看发现了一个mpvue这个框架发现可以用h5和vue写小程序果断看了一天，然后运用在项目中了！废话不多说，在这里说一说在实际开发中的一些坑。</p>
<h2 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h2><p>  这里就不多说基本配置了官方都有<a href="http://mpvue.com/mpvue/" target="_blank" rel="noopener">点击这里</a>！</p>
<h2 id="组件中的生命周期"><a href="#组件中的生命周期" class="headerlink" title="组件中的生命周期"></a>组件中的生命周期</h2><p>  我们都知道vue的生命周期函数，小程序也有他的生命周期函数！在mpvue里面我们都可以用！没错是都可以用，这个位置就是一个坑！我是在这样的业务场景发现有这样一个坑。。。</p>
<p>  本人做的这个项目有七个管理栏目 每个栏目中有相同样式的列表也和详情页，少部分也存在编辑新增！我将七个栏目列表共用了一个页面。  七个详情分别写了七个组件，我是根据页面路径传递不同的参数通过if判断实现的。在这里组件里面就存在一个问题，vue的钩子函数只会执行第一次（created和mounted），后续无论多少次进入是没办法执行的。然而小程序中的（onload和onshow）则是第一次不会执行后续再进入就会执行！在这里我是通过同时调用两边的钩子函数来避免这个问题的！</p>
<h2 id="编辑新增刷新数据"><a href="#编辑新增刷新数据" class="headerlink" title="编辑新增刷新数据"></a>编辑新增刷新数据</h2><p>  在栏目里面有些数据是会有编辑和新增的，这里有一个功能就是编辑/新增完成之后需要刷新数据。由于新增/编辑是另外的一个页面算是返回之后刷新在这里为了良好的用户体验、以及完成新增/编辑完成之后才刷新这个业务，我用了小程序里面的一个方法getCurrentPages()<br>  这个函数可以获取当前页面栈的实例，以数组形式按栈的顺序给出，第一个元素为首页，最后一个元素为当前页面。<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">  let _this = this;</span><br><span class="line">  let pages = getCurrentPages();</span><br><span class="line">  _this._2Page = pages[pages.length - 2]</span><br><span class="line">  _this._3Page = pages[pages.length - 3]</span><br><span class="line">  _this.isShow = true</span><br><span class="line">&#125;,</span><br><span class="line">onShow() &#123;</span><br><span class="line">  let _this = this;</span><br><span class="line">  let pages = getCurrentPages();</span><br><span class="line">  _this._2Page = pages[pages.length - 2]</span><br><span class="line">  _this._3Page = pages[pages.length - 3]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>  这里大家肯定会有疑问为啥要调用两次还是分别在vue的钩子函数中和小程序钩子函数中；答案就是我上面提到的那个问题！</p>
<p>  这里刷新数据就是通过他获取上级以及上上级页面的参数在编辑成功后执行上级或者上上级的钩子函数完成刷新页面！</p>
<h2 id="一些ui框架的组件初始化的问题"><a href="#一些ui框架的组件初始化的问题" class="headerlink" title="一些ui框架的组件初始化的问题"></a>一些ui框架的组件初始化的问题</h2><p>  这个项目中我用了很多ui组件毕竟项目紧就一个月…这里就有一些组件初始化的问题，比如通知栏这个组件 。由于，通知的消息是后台获取的，所以这里有一个循环滚动这个属性没有生效 。这里，我是用的if给他先隐藏然后再他获取消息成功之后在显示，这样就没问题啦~</p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>  因为本项目已经上线涉及保密不能给大家源码！这些如果能帮助大家是最好的，记得star我哟！</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  <div>
    
  </div>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nohomeman.github.io/Javascript基于对象三大特性（封装性、继承性、多态性）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="NoHomeMan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/background.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoHomeMan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Javascript基于对象三大特性（封装性、继承性、多态性）/" itemprop="url">Javascript基于对象三大特性（封装性、继承性、多态性）[转载]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-30T16:51:19+08:00">
                2018-10-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/Javascript基于对象三大特性（封装性、继承性、多态性）/#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://nohomeman.github.io/Javascript基于对象三大特性（封装性、继承性、多态性）/" class="cy_cmt_count" data-xid="Javascript基于对象三大特性（封装性、继承性、多态性）/" itemprop="commentsCount" ></span>
                </a>
              
            
          

          
          
             <span id="/Javascript基于对象三大特性（封装性、继承性、多态性）/" class="leancloud_visitors" data-flag-title="Javascript基于对象三大特性（封装性、继承性、多态性）[转载]">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
             <span class="post-meta-divider">|</span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,844
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  8
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>这篇文章主要介绍了Javascript基于对象三大特性，包括封装性、继承性、多态性，感兴趣的小伙伴们可以参考一下</li>
</ul>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Javascript基于对象的三大特征和C++，Java面向对象的三大特征一样，都是封装(encapsulation)、继承(inheritance )和多态(polymorphism )。只不过实现的方式不同，其基本概念是差不多的。其实除三大特征之外，还有一个常见的特征叫做抽象(abstract)，这也就是我们在一些书上有时候会看到面向对象四大特征的原因了。</p>
<h2 id="封装性"><a href="#封装性" class="headerlink" title="封装性"></a>封装性</h2><p>封装就是把抽象出来的数据和对数据的操作封装在一起，数据被保护在内部，程序的其它部分只有通过被授权的操作(成员方法)，才能对数据进行操作。<br>案例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">      function Person(name, agei, sal)&#123;</span><br><span class="line">        // 公开</span><br><span class="line">        this.name = name;</span><br><span class="line">        // 私有</span><br><span class="line">        var age = agei;</span><br><span class="line">        var salary = sal;</span><br><span class="line">      &#125;</span><br><span class="line">      var p1 = new Person(&apos;zs&apos;, 20, 10000);</span><br><span class="line">      window.alert(p1.name + p1.age);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>PS：JS封装只有两种状态，一种是公开的，一种是私有的。</p>
<p>通过构造函数添加成员方法和通过原型法添加成员方法的区别<br>1、通过原型法分配的函数是所有对象共享的.<br>2、通过原型法分配的属性是独立.(如果你不修改属性，他们是共享)<br>3、建议，如果我们希望所有的对象使用同一一个函数，最好使用原型法添加函数，这样比较节省内存.<br>案例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function Person()&#123;</span><br><span class="line">  this.name=&quot;zs&quot;;</span><br><span class="line">  var age=20;</span><br><span class="line">  this.abc=function()&#123;</span><br><span class="line">    window.alert(&quot;abc&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  function abc2()&#123;</span><br><span class="line">    window.alert(&quot;abc&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.fun1=function()&#123;</span><br><span class="line">  window.alert(this.name);//ok</span><br><span class="line">  //window.alert(age);//no ok</span><br><span class="line">  //abc2();//no ok</span><br><span class="line">  this.abc();//ok</span><br><span class="line">&#125;</span><br><span class="line">var p1=new Person();</span><br><span class="line">p1.fun1();</span><br></pre></td></tr></table></figure></p>
<h2 id="继承性"><a href="#继承性" class="headerlink" title="继承性"></a>继承性</h2><p>继承可以解决代码复用，让编程更加靠近人类思维。当多个类存在相同的属性(变量)和方法时，可以从这些类中抽象出父类，在父类中定义这些相同的属性和方法，所有的子类不需要重新定义这些属性和方法，只需要通过继承父类中的属性和方法。<br>JS中实现继承的方式</p>
<h3 id="1、对象冒充"><a href="#1、对象冒充" class="headerlink" title="1、对象冒充"></a>1、对象冒充</h3><p>案例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">      function Stu(name, age)&#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age;</span><br><span class="line">        this.show = function()&#123;</span><br><span class="line">          window.alert(this.name + &quot; &quot; + this.age);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      function MidStu(name, age) &#123;</span><br><span class="line">        this.stu = Stu;</span><br><span class="line">        // 通过对象冒充来实现继承的</span><br><span class="line">        // 对象冒充的意思就是获取那个类的所有成员，因为js是谁调用那个成员就是谁的，这样MidStu就有了Stu的成员了</span><br><span class="line">        this.stu(name, age);</span><br><span class="line">        this.payFee = function()&#123;</span><br><span class="line">          window.alert(&quot;缴费&quot; + money * 0.8);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      function Pupil(name, age) &#123;</span><br><span class="line">        this.stu = Stu;</span><br><span class="line">        // 通过对象冒充来实现继承的</span><br><span class="line">        this.stu(name, age);</span><br><span class="line">        this.payFee = function()&#123;</span><br><span class="line">          window.alert(&quot;缴费&quot; + money * 0.5);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      var midStu = new MidStu(&quot;zs&quot;, 13);</span><br><span class="line">      midStu.show();</span><br><span class="line">      var pupil = new Pupil(&quot;ls&quot;, 10);</span><br><span class="line">      pupil.show();</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="2、通过call或者apply实现"><a href="#2、通过call或者apply实现" class="headerlink" title="2、通过call或者apply实现"></a>2、通过call或者apply实现</h3><p>案例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">  //1. 把子类中共有的属性和方法抽取出，定义一个父类Stu</span><br><span class="line">  function Stu(name,age)&#123;</span><br><span class="line">    // window.alert(&quot;确实被调用.&quot;);</span><br><span class="line">    this.name=name;</span><br><span class="line">    this.age=age;</span><br><span class="line">    this.show=function()&#123;</span><br><span class="line">      window.alert(this.name+&quot;年龄是=&quot;+this.age);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  //2.通过对象冒充来继承父类的属性的方法</span><br><span class="line">  function MidStu(name,age)&#123;</span><br><span class="line">    //这里这样理解: 通过call修改了Stu构造函数的this指向,</span><br><span class="line">    //让它指向了调用者本身.</span><br><span class="line">    Stu.call(this,name,age);</span><br><span class="line">    //如果用apply实现，则可以</span><br><span class="line">    //Stu.apply(this,[name,age]); //说明传入的参数是 数组方式</span><br><span class="line">    //可以写MidStu自己的方法.</span><br><span class="line">    this.pay=function(fee)&#123;</span><br><span class="line">      window.alert(&quot;你的学费是&quot;+fee*0.8);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  function Pupil(name,age)&#123;</span><br><span class="line">    Stu.call(this,name,age);//当我们创建Pupil对象实例,Stu的构造函数会被执行,当执行后，我们Pupil对象就获取从 Stu封装的属性和方法</span><br><span class="line">    //可以写Pupil自己的方法.</span><br><span class="line">    this.pay=function(fee)&#123;</span><br><span class="line">      window.alert(&quot;你的学费是&quot;+fee*0.5);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  //测试</span><br><span class="line">  var midstu=new MidStu(&quot;zs&quot;,15);</span><br><span class="line">  var pupil=new Pupil(&quot;ls&quot;,12);</span><br><span class="line">  midstu.show();</span><br><span class="line">  midstu.pay(100);</span><br><span class="line">  pupil.show();</span><br><span class="line">  pupil.pay(100);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>小结：<br>1、JS对象可以通过对象冒充，实现多重继承<br>2、Object类是所有Js类的基类</p>
<h2 id="多态性"><a href="#多态性" class="headerlink" title="多态性"></a>多态性</h2><p>JS的函数重载<br>这个是多态的基础，在之前的Javascript入门已经说过了，JS函数不支持多态，但是事实上JS函数是无态的，支持任意长度，类型的参数列表。如果同时定义了多个同名函数，则以最后一个函数为准。<br>案例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">  //*****************说明js不支持重载*****</span><br><span class="line">  /*function Person()&#123;</span><br><span class="line">    this.test1=function (a,b)&#123;</span><br><span class="line">      window.alert(&apos;function (a,b)&apos;);  </span><br><span class="line">    &#125;</span><br><span class="line">    this.test1=function (a)&#123;</span><br><span class="line">      window.alert(&apos;function (a)&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  var p1=new Person();</span><br><span class="line">  //js中不支持重载.</span><br><span class="line">  //但是这不会报错，js会默认是最后同名一个函数，可以看做是后面的把前面的覆盖了。</span><br><span class="line">  p1.test1(&quot;a&quot;,&quot;b&quot;);</span><br><span class="line">  p1.test1(&quot;a&quot;);*/</span><br><span class="line"></span><br><span class="line">  //js怎么实现重载.通过判断参数的个数来实现重载</span><br><span class="line">  function Person()&#123;</span><br><span class="line">    this.test1=function ()&#123;</span><br><span class="line">      if(arguments.length==1)&#123;</span><br><span class="line">        this.show1(arguments[0]);</span><br><span class="line">      &#125;else if(arguments.length==2)&#123;</span><br><span class="line">        this.show2(arguments[0],arguments[1]);</span><br><span class="line">      &#125;else if(arguments.length==3)&#123;</span><br><span class="line">        this.show3(arguments[0],arguments[1],arguments[2]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    this.show1=function(a)&#123;</span><br><span class="line">      window.alert(&quot;show1()被调用&quot;+a);</span><br><span class="line">    &#125;</span><br><span class="line">    this.show2=function(a,b)&#123;</span><br><span class="line">      window.alert(&quot;show2()被调用&quot;+&quot;--&quot;+a+&quot;--&quot;+b);</span><br><span class="line">    &#125;</span><br><span class="line">    function show3(a,b,c)&#123;</span><br><span class="line">      window.alert(&quot;show3()被调用&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  var p1=new Person();</span><br><span class="line">  //js中不支持重载.</span><br><span class="line">  p1.test1(&quot;a&quot;,&quot;b&quot;);</span><br><span class="line">  p1.test1(&quot;a&quot;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>1、多态基本概念<br>多态是指一个引用(类型)在不同情况下的多种状态。也可以理解成：多态是指通过指向父类的引用，来调用在不同子类中实现的方法。<br>案例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">  // Master类</span><br><span class="line">  function Master(name)&#123;</span><br><span class="line">    this.nam=name;</span><br><span class="line">    //方法[给动物喂食物]</span><br><span class="line">  &#125;</span><br><span class="line">  //原型法添加成员函数</span><br><span class="line">  Master.prototype.feed=function (animal,food)&#123;</span><br><span class="line">    window.alert(&quot;给&quot;+animal.name+&quot; 喂&quot;+ food.name);</span><br><span class="line">  &#125;</span><br><span class="line">  function Food(name)&#123;</span><br><span class="line">    this.name=name;</span><br><span class="line">  &#125;</span><br><span class="line">  //鱼类</span><br><span class="line">  function Fish(name)&#123;</span><br><span class="line">    this.food=Food;</span><br><span class="line">    this.food(name);</span><br><span class="line">  &#125;</span><br><span class="line">  //骨头</span><br><span class="line">  function Bone(name)&#123;</span><br><span class="line">    this.food=Food;</span><br><span class="line">    this.food(name);</span><br><span class="line">  &#125;</span><br><span class="line">  function Peach(name)&#123;</span><br><span class="line">    this.food=Food;</span><br><span class="line">    this.food(name);</span><br><span class="line">  &#125;</span><br><span class="line">  //动物类</span><br><span class="line">  function Animal(name)&#123;</span><br><span class="line">    this.name=name;</span><br><span class="line">  &#125;</span><br><span class="line">  //猫猫</span><br><span class="line">  function Cat(name)&#123;</span><br><span class="line">    this.animal=Animal;</span><br><span class="line">    this.animal(name);</span><br><span class="line">  &#125;</span><br><span class="line">  //狗狗</span><br><span class="line">  function Dog(name)&#123;</span><br><span class="line">    this.animal=Animal;</span><br><span class="line">    this.animal(name);</span><br><span class="line">  &#125;</span><br><span class="line">  //猴子</span><br><span class="line">  function Monkey(name)&#123;</span><br><span class="line">    this.animal=Animal;</span><br><span class="line">    this.animal(name);</span><br><span class="line">  &#125;</span><br><span class="line">  var cat=new Cat(&quot;猫&quot;);</span><br><span class="line">  var fish=new Fish(&quot;鱼&quot;);</span><br><span class="line"></span><br><span class="line">  var dog=new Dog(&quot;狗&quot;);</span><br><span class="line">  var bone=new Bone(&quot;骨头&quot;);</span><br><span class="line"></span><br><span class="line">  var monkey=new Monkey(&quot;猴&quot;);</span><br><span class="line">  var peach=new Peach(&quot;桃&quot;);</span><br><span class="line"></span><br><span class="line">  //创建一个主人</span><br><span class="line">  var master=new Master(&quot;zs&quot;);</span><br><span class="line">  master.feed(dog,bone);</span><br><span class="line">  master.feed(cat,fish);</span><br><span class="line">  master.feed(monkey,peach);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>多态利于代码的维护和扩展，当我们需要使用同一类树上的对象时，只需要传入不同的参数就行了，而不需要再new 一个对象。</p>
<p>以上就是Javascript基于对象三大特性，希望对大家的学习有所帮助。</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  <div>
    
  </div>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nohomeman.github.io/一名前端Web架构师的成长之路（转载）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="NoHomeMan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/background.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoHomeMan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/一名前端Web架构师的成长之路（转载）/" itemprop="url">一名前端Web架构师的成长之路（转载）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-30T16:39:34+08:00">
                2018-10-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/大前端进阶之路/" itemprop="url" rel="index">
                    <span itemprop="name">大前端进阶之路</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/一名前端Web架构师的成长之路（转载）/#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://nohomeman.github.io/一名前端Web架构师的成长之路（转载）/" class="cy_cmt_count" data-xid="一名前端Web架构师的成长之路（转载）/" itemprop="commentsCount" ></span>
                </a>
              
            
          

          
          
             <span id="/一名前端Web架构师的成长之路（转载）/" class="leancloud_visitors" data-flag-title="一名前端Web架构师的成长之路（转载）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
             <span class="post-meta-divider">|</span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,776
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  9
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本人也是coding很多年，虽然很失败，但也总算有点失败的心得，不过我在中国，大多数程序员都是像我一样，在一直走着弯路。如果想成为一个架构师，就必须走正确的路，否则离目标越来越远，正在辛苦工作的程序员们，你们有没有下面几种感觉？</p>
<p>一、我的工作就是按时完成领导交给我的任务，至于代码写的怎样，知道有改进空间，但没时间去改进，关键是领导也不给时间啊。</p>
<p>二、我发现我的水平总是跟不上技术的进步，有太多想学的东西要学，jQuery用的人最近比较多啊，听说最近MVC比较火，还有LINQ，听说微软又有Silverlight了……</p>
<p>三、我发现虽然我工作几年了，除了不停的coding，Ctrl+C和Ctrl+V更熟练了，但编码水平并没有提高，还是一个普通程序员，但有人已经做到架构师了。</p>
<p>四、工作好几年了，想跳槽换个工作，结果面试的考官都问了一些什么数据结构，什么垃圾回收，什么设计模式之类的东西，虽然看过，但是平时用不着，看了也忘记了，回答不上来，结果考官说我基础太差。。。</p>
<p>有没有，如果没有，接下来就不用看了，你一定是大拿了，或者已经明白其中之道了，呵呵。</p>
<p>如果有，恭喜你，你进入学习误区了，如果想在技术上前进的话，就不能一直的coding，为了完成需求而工作，必须在coding的同时，让我们的思维，水平也在不停的提高。</p>
<p>写代码要经历下面几个阶段。</p>
<p>　　一 、你必须学习面向对象的基础知识，如果连这个都忘了，那你的编程之路注定是在做原始初级的重复！</p>
<p>　　很多程序员都知道类、方法、抽象类、接口等概念，但是为什么要面向对象，好处在哪里，要解决什么问题？只是明白概念，就是表达不清楚，然后在实 际工作中也用不上，过了一段时间，面向对象的东西又模糊了，结果是大多数程序员用着面向对象的语言做着面向过程的工作，因此要学习面向对象，首先应该明白 面向对象的目的是什么？</p>
<p>　　面向对象的目的是什么？</p>
<p>　　开发语言在不断发展，从机器语言，到汇编，到高级语言，再到第四代语言;软件开发方法在不断发展，从面向过程，面向对象，到面向方面等。虽然这些都在不断发展，但其所追求的目标却一直没变，这些目标就是：</p>
<p>　　1. 降低软件开发的复杂度</p>
<p>　　2. 提高软件开发的效率</p>
<p>　　3. 提高软件质量：可维护性，可扩展性，可重用性等。</p>
<p>　　其中语言的发展，开发方法的发展在1,2两条上面取得了极大的进步，但对于第3条，我们不能光指望开发方法本身来解决。</p>
<p>　　提高软件质量：可维护性，可扩展性，可重用性等，再具体点，就是高内聚、低耦合，面向对象就是为了解决第3条的问题。因此要成为一个好的程序员，最绕不开的就是面向对象了。可以500%提高开发效率的前端UI框架！</p>
<p>　　二、 要想学好面向对象，就必须学习设计模式。</p>
<p>　　假定我们了解了面向对象的目的，概念了，但是我们coding过程中却发现，我们的面向对象的知识似乎一直派不上用场，其实道理很简单，是因为 我们不知道怎么去用，就像游泳一样，我们已经明白了游泳的好处，以及游泳的几种姿势，狗刨、仰泳、蛙泳、自由泳，但是我们依然不会游泳。。。。</p>
<p>　　因此有了这些基本原则是不行的，我们必须有一些更细的原则去指导我们的设计，这就有了更基础的面向对象的五大原则，而把这几种原则更详细的应用 到实际中来，解决实际的问题，这就是设计模式。因此要学好OO，必须要学习设计模式，学习设计模式，按大师的话说，就是在人类努力解决的许多领域的成功方 案都来源于各种模式，教育的一个重要目标就是把知识的模式一代一代传下去。</p>
<p>　　因此学习设计模式，就像我们在看世界顶级的游泳比赛，我们为之疯狂，为之着迷。</p>
<p>　　三、学习设计模式</p>
<p>　　正像我们并不想只是看别人表演，我们要自己学会游泳，这才是我们的目的所在。</p>
<p>　　当我们看完几篇设计模式后，我们为之精神振奋，在新的coding的时候，我们总是想努力的用上学到的设计模式，但是经常在误用模式，折腾半天发现是在脱裤子抓痒。。。</p>
<p>　　当学完设计模式之后，我们又很困惑，感觉这些模式简直太像了，很多时候我们分不清这些模式之间到底有什么区别，而且明白了设计过程中的一个致命 的东西——过度设计，因为设计模式要求我们高扩展性，高重用性，但是在需求提出之初，我们都不是神，除了依靠过去的经验来判断外，我们不知道哪些地方要扩 展，哪些地方要重用，而且过去的经验就一定是正确的吗？所以我们甚至不敢再轻易用设计模式，而是还一直在用面向过程的方法在实现需求。</p>
<p>　　四、学习重构</p>
<p>　　精彩的代码是怎么想出来的，比看到精彩的代码更加令人期待。于是我们开始思考，这些大师们莫非不用工作，需求来了没有领导规定完成时间，只以设 计精彩的代码为标准来开展工作？这样的工作太爽了，也不可能，老板不愿意啊。就算这些理想的条件他都有，他就一开始就设计出完美的代码来了？也不可能啊， 除非他是神，一开始就预料到未来的所有需求，那既然这些条件都没有，他们如何写出的精彩代码？</p>
<p>　　Joshua Kerievsky在那篇著名的《模式与XP》〔收录于《极限编程研究》一书）中明白地指出：在设计前期使用模式常常导致过度工程（over- engineering)。这是一个残酷的现实，单凭对完美的追求无法写出实用的代码，而「实用」是软件压倒一切的要素。</p>
<p>　　在《重构——改善既有的代码的设计》一书中提到，通过重构（refactoring），你可以找出改变的平衡点。你会发现所谓设计不再是一切动 作的前提，而是在整个开发过程中逐渐浮现出来。在系统构筑过程中，你可以学习如何强化设计；其间带来的互动可以让一个程序在开发过程中持续保有良好的设 计。</p>
<p>　　总结起来就是说，我们在设计前期就使用设计模式，往往导致设计过度，因此应该在整个开发过程，整个需求变更过程中不断的重构现在的代码，才能让 程序一直保持良好的设计。由此可见，开发过程中需要一直重构，否则无论当初设计多么的好，随着需求的改变，都会变成一堆烂代码，难以维护，难以扩展。所谓 重构是这样一个过程：「在不改变代码外在行为的前提下，对代码做出修改，以改进程序的内部结构」。重构的目标，就是设计模式，更本质的讲就是使程序的架构 更趋合理，从而提高软件的可维护性，可扩展性，可重用性。</p>
<p>　　《重构——改善既有的代码的设计》一书也是Martin Fowler等大师的作品，软件工程领域的超级经典巨著，与另一巨著《设计模式》并称”软工双雄”，不可不读啊。</p>
<p>　　五、开始通往优秀软件设计师的路上。可以500%提高开发效率的前端UI框架！</p>
<p>　　通过设计模式和重构，我们的所学和我们工作的coding终于结合上了，我们可以在工作中用面向对象的思维去考虑问题，并开始学习重构了。这就 像游泳一样，我们看完了各种顶级的游泳比赛，明白各种规则，名人使用的方法和技巧，现在是时候回家去村旁边的小河里练练了。练习也是需要有教练的，推荐另 一本经典书叫《重构与模式》，引用他开篇的介绍，本书开创性地深入揭示了重构与模式这两种软件开发关键技术之间的联系，说明了通过重构实现模式改善既有的 设计，往往优于在新的设计早期使用模式。本书不仅展示了一种应用模式和重构的创新方法，而且有助于读者结合实战深入理解重构和模式。</p>
<p>　　这本书正是我们需要的教练，值得一读。</p>
<p>　　六、没有终点，只有坚持不懈的专研和努力。</p>
<p>　　经过了几年的坚持，终于学会了灵活的运用各种模式，我们不需要去刻意的想用什么模式，怎么重构。程序的目标，就是可维护性，可扩展性，可重用 性，都已经成了一种编程习惯，一种思维习惯，就像我们练习了几年游泳之后，我们不用再刻意的去考虑，如何让自己能在水上漂起来，仰泳和蛙泳的区 别….. 而是跳进水里，就自然的游了起来，朝对岸游去。但是要和大师比起来，嘿嘿，我们还有很长的路要走，最终也可能成不了大师，但无论能不能成为大师，我们已经 走在了成为大师的正确的路上，我们和别的程序员已经开始不一样，因为他们无论再过多少年，他们的水平不会变，只是在重复造轮子，唯一比你快的，就是 Ctrl+C和Ctrl+V。</p>
<p>　　正确的路上，只要坚持，就离目标越来越近，未来就一定会是一个优秀的架构师，和优秀架构师的区别，可能只是时间问题。</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  <div>
    
  </div>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nohomeman.github.io/ES6的迁移之路-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="NoHomeMan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/background.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoHomeMan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ES6的迁移之路-5/" itemprop="url">ES6的迁移之路---[5]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-23T16:17:52+08:00">
                2018-10-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/ES6的迁移之路-5/#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://nohomeman.github.io/ES6的迁移之路-5/" class="cy_cmt_count" data-xid="ES6的迁移之路-5/" itemprop="commentsCount" ></span>
                </a>
              
            
          

          
          
             <span id="/ES6的迁移之路-5/" class="leancloud_visitors" data-flag-title="ES6的迁移之路---[5]">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
             <span class="post-meta-divider">|</span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,356
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  12
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对ES6中的<code>Proxy</code>、<code>Class</code>、<code>Promise</code>、<code>iterator</code>、<code>genertaor</code>、<code>修饰器</code>、<code>import</code>进行学习笔记</p>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><p>Proxy(代理) 是 ES6 中新增的一个特性。<br>Proxy 让我们能够以简洁易懂的方式控制外部对对象的访问。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let obj=&#123;</span><br><span class="line">    time:&apos;2017-03-11&apos;,</span><br><span class="line">    name:&apos;net&apos;,</span><br><span class="line">    _r:123</span><br><span class="line">  &#125;;</span><br><span class="line">  let monitor=new Proxy(obj,&#123;</span><br><span class="line">    // 拦截对象属性的读取</span><br><span class="line">    get(target,key)&#123;</span><br><span class="line">      return target[key].replace(&apos;2017&apos;,&apos;2018&apos;)</span><br><span class="line">    &#125;,</span><br><span class="line">    // 拦截对象设置属性</span><br><span class="line">    set(target,key,value)&#123;</span><br><span class="line">      if(key===&apos;name&apos;)&#123;</span><br><span class="line">        return target[key]=value;</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        return target[key];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 拦截key in object操作</span><br><span class="line">    has(target,key)&#123;</span><br><span class="line">      if(key===&apos;name&apos;)&#123;</span><br><span class="line">        return target[key]</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 拦截delete</span><br><span class="line">    deleteProperty(target,key)&#123;</span><br><span class="line">      if(key.indexOf(&apos;_&apos;)&gt;-1)&#123;</span><br><span class="line">        delete target[key];</span><br><span class="line">        return true;</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        return target[key]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 拦截Object.keys,Object.getOwnPropertySymbols,Object.getOwnPropertyNames</span><br><span class="line">    ownKeys(target)&#123;</span><br><span class="line">      return Object.keys(target).filter(item=&gt;item!=&apos;time&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  console.log(&apos;get&apos;,monitor.time);//get 2018-03-11</span><br><span class="line"></span><br><span class="line">  monitor.time=&apos;2018&apos;;</span><br><span class="line">  monitor.name=&apos;mukewang&apos;;</span><br><span class="line">  console.log(&apos;set&apos;,monitor.time);set 2018-03-11</span><br><span class="line"></span><br><span class="line">  console.log(&apos;has&apos;,&apos;name&apos; in monitor,&apos;time&apos; in monitor);//has true false</span><br><span class="line">  console.log(&apos;ownKeys&apos;,Object.keys(monitor));//ownKeys [&quot;name&quot;,&apos;_r&apos;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><p>Class这个概念,作为对象的模板,通过class关键字,可以定义类。基本上,ES6的class可以看作只是一个语法糖,它的绝大部分功能,ES5都可以做到,新的class写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 基本定义和生成实例</span><br><span class="line">  class Parent&#123;</span><br><span class="line">    constructor(name=&apos;mukewang&apos;)&#123;</span><br><span class="line">      this.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  let v_parent=new Parent(&apos;v&apos;);</span><br><span class="line">  console.log(&apos;构造函数和实例&apos;,v_parent);//构造函数和实例 Parent &#123; name: &apos;v&apos; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  // 继承</span><br><span class="line">  class Parent&#123;</span><br><span class="line">    constructor(name=&apos;mukewang&apos;)&#123;</span><br><span class="line">      this.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  class Child extends Parent&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  console.log(&apos;继承&apos;,new Child());继承 Child &#123; name: &apos;mukewang&apos; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  // 继承传递参数</span><br><span class="line">  class Parent&#123;</span><br><span class="line">    constructor(name=&apos;mukewang&apos;)&#123;</span><br><span class="line">      this.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  class Child extends Parent&#123;</span><br><span class="line">    constructor(name=&apos;child&apos;)&#123;</span><br><span class="line">      super(name);</span><br><span class="line">      this.type=&apos;child&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  console.log(&apos;继承传递参数&apos;,new Child(&apos;hello&apos;));//继承传递参数 Child &#123; name: &apos;hello&apos;, type: &apos;child&apos; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  // getter,setter</span><br><span class="line">  class Parent&#123;</span><br><span class="line">    constructor(name=&apos;mukewang&apos;)&#123;</span><br><span class="line">      this.name=name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    get longName()&#123;</span><br><span class="line">      return &apos;mk&apos;+this.name</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    set longName(value)&#123;</span><br><span class="line">      this.name=value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  let v=new Parent();</span><br><span class="line">  console.log(&apos;getter&apos;,v.longName);//getter mkmukewang</span><br><span class="line">  v.longName=&apos;hello&apos;;</span><br><span class="line">  console.log(&apos;setter&apos;,v.longName);//setter mkhello</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  // 静态方法</span><br><span class="line">  class Parent&#123;</span><br><span class="line">    constructor(name=&apos;mukewang&apos;)&#123;</span><br><span class="line">      this.name=name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static tell()&#123;</span><br><span class="line">      console.log(&apos;tell&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Parent.tell();//test</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  // 静态属性</span><br><span class="line">  class Parent&#123;</span><br><span class="line">    constructor(name=&apos;mukewang&apos;)&#123;</span><br><span class="line">      this.name=name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static tell()&#123;</span><br><span class="line">      console.log(&apos;tell&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  Parent.type=&apos;test&apos;;</span><br><span class="line">  console.log(&apos;静态属性&apos;,Parent.type);//静态属性 test</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>Promise 是异步编程的一种解决方案，比传统的解决方案–回调函数和事件－－更合理和更强大。它由社区最早提出和实现，ES6将其写进了语言标准，统一了语法，原生提供了Promise</p>
<p>所谓Promise ，简单说就是一个容器，里面保存着某个未来才回结束的事件(通常是一个异步操作）的结果。从语法上说，Promise是一个对象，从它可以获取异步操作的消息。<br>Promise 对象的状态不受外界影响<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 基本定义</span><br><span class="line">  let ajax=function(callback)&#123;</span><br><span class="line">    console.log(&apos;执行&apos;);</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">      callback&amp;&amp;callback.call()</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">  &#125;;</span><br><span class="line">  ajax(function()&#123;</span><br><span class="line">    console.log(&apos;timeout1&apos;);</span><br><span class="line">  &#125;) // 执行 timeout1</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  let ajax=function()&#123;</span><br><span class="line">    console.log(&apos;执行2&apos;);</span><br><span class="line">    return new Promise(function(resolve,reject)&#123;</span><br><span class="line">      setTimeout(function () &#123;</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;, 1000);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  ajax().then(function()&#123;</span><br><span class="line">    console.log(&apos;promise&apos;,&apos;timeout2&apos;);</span><br><span class="line">  &#125;)//执行2  promise timeout2</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  let ajax=function()&#123;</span><br><span class="line">    console.log(&apos;执行3&apos;);</span><br><span class="line">    return new Promise(function(resolve,reject)&#123;</span><br><span class="line">      setTimeout(function () &#123;</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;, 1000);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  ajax()</span><br><span class="line">    .then(function()&#123;</span><br><span class="line">    return new Promise(function(resolve,reject)&#123;</span><br><span class="line">      setTimeout(function () &#123;</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;, 2000);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">    .then(function()&#123;</span><br><span class="line">    console.log(&apos;timeout3&apos;);//执行3 timeout3</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  let ajax=function(num)&#123;</span><br><span class="line">    console.log(&apos;执行4&apos;);</span><br><span class="line">    return new Promise(function(resolve,reject)&#123;</span><br><span class="line">      if(num&gt;5)&#123;</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        throw new Error(&apos;出错了&apos;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ajax(6).then(function()&#123;</span><br><span class="line">    console.log(&apos;log&apos;,6);</span><br><span class="line">  &#125;).catch(function(err)&#123;</span><br><span class="line">    console.log(&apos;catch&apos;,err);</span><br><span class="line">  &#125;);//执行4 log6</span><br><span class="line"></span><br><span class="line">  ajax(3).then(function()&#123;</span><br><span class="line">    console.log(&apos;log&apos;,3);</span><br><span class="line">  &#125;).catch(function(err)&#123;</span><br><span class="line">    console.log(&apos;catch&apos;,err);</span><br><span class="line">  &#125;);//执行4 error</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>下面是一个用Promise对象实现的 Ajax 操作的例子。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">const getJSON = function(url) &#123;</span><br><span class="line">  const promise = new Promise(function(resolve, reject)&#123;</span><br><span class="line">    const handler = function() &#123;</span><br><span class="line">      if (this.readyState !== 4) &#123;</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      if (this.status === 200) &#123;</span><br><span class="line">        resolve(this.response);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        reject(new Error(this.statusText));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    const client = new XMLHttpRequest();</span><br><span class="line">    client.open(&quot;GET&quot;, url);</span><br><span class="line">    client.onreadystatechange = handler;</span><br><span class="line">    client.responseType = &quot;json&quot;;</span><br><span class="line">    client.setRequestHeader(&quot;Accept&quot;, &quot;application/json&quot;);</span><br><span class="line">    client.send();</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return promise;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">getJSON(&quot;/posts.json&quot;).then(function(json) &#123;</span><br><span class="line">  console.log(&apos;Contents: &apos; + json);</span><br><span class="line">&#125;, function(error) &#123;</span><br><span class="line">  console.error(&apos;出错了&apos;, error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>深入理解Promise.all()<br>我们在来看一下这段代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Promise.all([asyncTask(1),asyncTask(2),asyncTask(3)])</span><br><span class="line">.then(resultList =&gt; &#123;</span><br><span class="line">    console.log(&apos;results:&apos;,resultList);</span><br><span class="line">&#125;);</span><br><span class="line">传入3个Promise实例：</span><br><span class="line">Promise.all([</span><br><span class="line">  new Promise(function(resolve, reject) &#123;</span><br><span class="line">    resolve(1)</span><br><span class="line">  &#125;),</span><br><span class="line">  new Promise(function(resolve, reject) &#123;</span><br><span class="line">    resolve(2)</span><br><span class="line">  &#125;),</span><br><span class="line">  new Promise(function(resolve, reject) &#123;</span><br><span class="line">    resolve(3)</span><br><span class="line">  &#125;)</span><br><span class="line">]).then(arr =&gt; &#123;</span><br><span class="line">  console.log(arr) // [1, 2, 3]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>Promise.race()<br>语法和all()一样，但是返回值有所不同，race根据传入的多个Promise实例，只要有一个实例resolve或者reject，就只返回该结果，其他实例不再执行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Promise.race([</span><br><span class="line">  new Promise(function(resolve, reject) &#123;</span><br><span class="line">    setTimeout(() =&gt; resolve(1), 1000)</span><br><span class="line">  &#125;),</span><br><span class="line">  new Promise(function(resolve, reject) &#123;</span><br><span class="line">    setTimeout(() =&gt; resolve(2), 100)</span><br><span class="line">  &#125;),</span><br><span class="line">  new Promise(function(resolve, reject) &#123;</span><br><span class="line">    setTimeout(() =&gt; resolve(3), 10)</span><br><span class="line">  &#125;)</span><br><span class="line">]).then(value =&gt; &#123;</span><br><span class="line">  console.log(value) // 3</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="iterator"><a href="#iterator" class="headerlink" title="iterator"></a>iterator</h2><p>遍历器（Iterator）就是这样一种机制。它是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只要部署Iterator接口，就可以完成遍历操作（即依次处理该数据结构的所有成员）。<br>作用：</p>
<p>为各种数据结构，提供一个统一的、简便的访问接口<br>使得数据结构的成员能够按某种次序排列<br>ES6创造了一种新的遍历命令for…of循环，Iterator接口主要供for…of消费<br>Iterator的遍历过程：</p>
<ul>
<li>创建一个指针对象，指向当前数据结构的起始位置。也就是说，遍历器对象本质上，就是一个指针对象。</li>
<li>第一次调用指针对象的next方法，可以将指针指向数据结构的第一个成员。</li>
<li>第二次调用指针对象的next方法，指针就指向数据结构的第二个成员。</li>
<li>不断调用指针对象的next方法，直到它指向数据结构的结束位置。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let arr=[&apos;hello&apos;,&apos;world&apos;];</span><br><span class="line">  let map=arr[Symbol.iterator]();</span><br><span class="line">  console.log(map.next());</span><br><span class="line">  console.log(map.next());</span><br><span class="line">  console.log(map.next());</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">&#123; value: &apos;hello&apos;, done: false &#125;</span><br><span class="line">&#123; value: &apos;world&apos;, done: false &#125;</span><br><span class="line">&#123; value: undefined, done: true &#125;</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<p>自定义for of 循环<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let obj=&#123;</span><br><span class="line">    start:[1,3,2],</span><br><span class="line">    end:[7,9,8],</span><br><span class="line">    [Symbol.iterator]()&#123;</span><br><span class="line">      let self=this;</span><br><span class="line">      let index=0;</span><br><span class="line">      let arr=self.start.concat(self.end);</span><br><span class="line">      let len=arr.length;</span><br><span class="line">      return &#123;</span><br><span class="line">        next()&#123;</span><br><span class="line">          if(index&lt;len)&#123;</span><br><span class="line">            return &#123;</span><br><span class="line">              value:arr[index++],</span><br><span class="line">              done:false</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;else&#123;</span><br><span class="line">            return &#123;</span><br><span class="line">              value:arr[index++],</span><br><span class="line">              done:true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  for(let key of obj)&#123;</span><br><span class="line">    console.log(key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 1 3 2 7 9 8</span><br></pre></td></tr></table></figure></p>
<p>##Generator<br>Generator函数是ES6提供的一种异步编程解决方案，语法行为与传统函数完全不同。<br>Generator函数有多种理解角度。从语法上，首先可以把它理解成，Generator函数一个状态机，封装了多个内部状态。<br>执行Generator函数会返回一个遍历器对象，也就是说，Generator函数除了状态机，还是一个遍历器对象生成函数。<br>形式上，Generator函数是一个普通函数，但是有两个特征。一是，function关键字与函数名之间有一个星号，二是，函数体内部使用yield语句，定义不同的内部状态。(yield语句在英语里的意思就是“产出”)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // genertaor基本定义</span><br><span class="line">  let tell=function* ()&#123;</span><br><span class="line">    yield &apos;a&apos;;</span><br><span class="line">    yield &apos;b&apos;;</span><br><span class="line">    return &apos;c&apos;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  let k=tell();</span><br><span class="line"></span><br><span class="line">  console.log(k.next());</span><br><span class="line">  console.log(k.next());</span><br><span class="line">  console.log(k.next());</span><br><span class="line">  console.log(k.next());</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">&#123; value: &apos;a&apos;, done: false &#125;</span><br><span class="line">&#123; value: &apos;b&apos;, done: false &#125;</span><br><span class="line">&#123; value: &apos;c&apos;, done: true &#125;</span><br><span class="line">&#123; value: undefined, done: true &#125;</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  let obj=&#123;&#125;;</span><br><span class="line">  obj[Symbol.iterator]=function* ()&#123;</span><br><span class="line">    yield 1;</span><br><span class="line">    yield 2;</span><br><span class="line">    yield 3;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  for(let value of obj)&#123;</span><br><span class="line">    console.log(&apos;value&apos;,value);</span><br><span class="line">  &#125;</span><br><span class="line">  /*</span><br><span class="line">  value 1</span><br><span class="line">  value 2</span><br><span class="line">  value 3</span><br><span class="line">  */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  let state=function* ()&#123;</span><br><span class="line">    while(1)&#123;</span><br><span class="line">      yield &apos;A&apos;;</span><br><span class="line">      yield &apos;B&apos;;</span><br><span class="line">      yield &apos;C&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  let status=state();</span><br><span class="line">  console.log(status.next());</span><br><span class="line">  console.log(status.next());</span><br><span class="line">  console.log(status.next());</span><br><span class="line">  console.log(status.next());</span><br><span class="line">  console.log(status.next());</span><br><span class="line">  /*</span><br><span class="line">  &#123; value: &apos;A&apos;, done: false &#125;</span><br><span class="line">  &#123; value: &apos;B&apos;, done: false &#125;</span><br><span class="line">  &#123; value: &apos;C&apos;, done: false &#125;</span><br><span class="line">  &#123; value: &apos;A&apos;, done: false &#125;</span><br><span class="line">  &#123; value: &apos;B&apos;, done: false &#125;</span><br><span class="line">  */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="修饰器-descriptor"><a href="#修饰器-descriptor" class="headerlink" title="修饰器(descriptor)"></a>修饰器(descriptor)</h2><p>decorator是ES7引入的功能，它是一个函数，用来修改类甚至于是方法的行为。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let readonly=function(target,name,descriptor)&#123;</span><br><span class="line">    descriptor.writable=false;</span><br><span class="line">    return descriptor</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  class Test&#123;</span><br><span class="line">    @readonly</span><br><span class="line">    time()&#123;</span><br><span class="line">      return &apos;2017-03-11&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  let test=new Test();</span><br><span class="line"></span><br><span class="line">  // test.time=function()&#123;</span><br><span class="line">  //   console.log(&apos;reset time&apos;);</span><br><span class="line">  // &#125;;</span><br><span class="line"></span><br><span class="line">  console.log(test.time());</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  let typename=function(target,name,descriptor)&#123;</span><br><span class="line">    target.myname=&apos;hello&apos;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @typename</span><br><span class="line">  class Test&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  console.log(&apos;类修饰符&apos;,Test.myname);//&apos;hello&apos;</span><br><span class="line">  // 第三方库修饰器的js库：core-decorators; npm install core-decorators</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="import"><a href="#import" class="headerlink" title="import"></a>import</h2><p>import语句用于导入由另一个模块导出的绑定。<br>创建a.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let A=123;</span><br><span class="line">let test=function()&#123;</span><br><span class="line">  console.log(&apos;test&apos;);</span><br><span class="line">&#125;</span><br><span class="line">class Hello&#123;</span><br><span class="line">  test()&#123;</span><br><span class="line">    console.log(&apos;class&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  A,</span><br><span class="line">  test,</span><br><span class="line">  Hello</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>b.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import a from &quot;./a.ja&quot;</span><br><span class="line">console.log(a.A) // 123</span><br><span class="line">a.test()// &apos;test&apos;</span><br><span class="line">new a.Hello().test() // &apos;class&apos;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  <div>
    
  </div>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nohomeman.github.io/ES6的迁移之路-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="NoHomeMan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/background.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoHomeMan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ES6的迁移之路-4/" itemprop="url">ES6的迁移之路---[4]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-23T15:21:24+08:00">
                2018-10-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/ES6的迁移之路-4/#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://nohomeman.github.io/ES6的迁移之路-4/" class="cy_cmt_count" data-xid="ES6的迁移之路-4/" itemprop="commentsCount" ></span>
                </a>
              
            
          

          
          
             <span id="/ES6的迁移之路-4/" class="leancloud_visitors" data-flag-title="ES6的迁移之路---[4]">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
             <span class="post-meta-divider">|</span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,337
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对ES6中的 <code>Symbol</code>、<code>Reflect</code>、<code>set</code>、<code>WeakSet</code>、<code>map</code>、<code>WeakMap</code></p>
<h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><p>Symbol是ES6新定义的一直数据类型.他表示独一无二。<br>声明<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let a = Symbol(),b = Symbol()</span><br><span class="line">  console.log(a === b) //false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Symbol.for机制有点类似于单例模式，首先在全局中搜索有没有以该参数作为名称的Symbol值，如果有，就返回这个Symbol值，否则就新建并返回一个以该字符串为名称的Symbol值。和直接的Symbol就点不同了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let a=Symbol.for(&apos;a&apos;);</span><br><span class="line">  let b=Symbol.for(&apos;a&apos;);</span><br><span class="line">  console.log(a===b); //true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>symbol类型的数据使用一般的方法是查不出其属性的。需要使用Object.getOwnPropertySymbols()或者Reflect.ownKeys()<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let a1=Symbol.for(&apos;abc&apos;);</span><br><span class="line">  let obj=&#123;</span><br><span class="line">        [a1]:&apos;123&apos;,</span><br><span class="line">        &apos;abc&apos;:345,</span><br><span class="line">        &apos;c&apos;:456</span><br><span class="line">      &#125;;</span><br><span class="line">  console.log(&apos;obj&apos;,obj);&#125; //obj &#123; abc: 345, c: 456, [Symbol(abc)]: &apos;123&apos; &#125;</span><br><span class="line"></span><br><span class="line">  for(let [key,value] of Object.entries(obj))&#123;</span><br><span class="line">    console.log(&apos;let of&apos;,key,value);//let of abc 345</span><br><span class="line">                                    // let of c 456</span><br><span class="line">  &#125;</span><br><span class="line">  Object.getOwnPropertySymbols(obj).forEach(function(item)&#123;</span><br><span class="line">    console.log(obj[item]); // 123</span><br><span class="line">  &#125;)</span><br><span class="line">  Reflect.ownKeys(obj).forEach(function(item)&#123;</span><br><span class="line">    console.log(&apos;ownkeys&apos;,item,obj[item]);</span><br><span class="line">  &#125;)</span><br><span class="line">  /*</span><br><span class="line">  ownkeys abc 345</span><br><span class="line">  ownkeys c 456</span><br><span class="line">  ownkeys Symbol(abc) 123</span><br><span class="line">  */</span><br></pre></td></tr></table></figure></p>
<h2 id="Reflect对象"><a href="#Reflect对象" class="headerlink" title="Reflect对象"></a>Reflect对象</h2><p>在上面提到的一个Reflect这个对象,多数Reflect方法原生的Object已经重新实现了.</p>
<h3 id="为什么要使用Reflect"><a href="#为什么要使用Reflect" class="headerlink" title="为什么要使用Reflect"></a>为什么要使用Reflect</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">复制代码</span><br><span class="line">try &#123;</span><br><span class="line">  Object.defineProperty(obj, name, desc);</span><br><span class="line">  // property defined successfully</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">  // possible failure (and might accidentally catch the wrong exception)</span><br><span class="line">&#125;</span><br><span class="line">//执行成功会返回obj， 以及其它原因导致的错误</span><br><span class="line"></span><br><span class="line">if (Reflect.defineProperty(obj, name, desc)) &#123;</span><br><span class="line">  // success</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  // failure</span><br><span class="line">&#125;</span><br><span class="line">//只会返回false或者true来表示对象的属性是否设置上了</span><br></pre></td></tr></table></figure>
<p>在ES5中这样判断：name in obj ； 或者删除一个属性 ：delete obj[name],  虽然这些很好用， 很简短， 很明确， 但是要使用的时候也要封装成一个类；<br>有了Reflect， 它帮你封装好了， Reflect.has(obj, name),  Reflect.deleteProperty(obj, name);</p>
<p>Reflect.ownKeys()方法的使用：<br>Reflect.ownKeys， Object可没有ownKeys方法, Reflect.ownKeysz他的作用是返回对象的keys;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">复制代码</span><br><span class="line">console.log(Reflect.ownKeys(&#123;&quot;a&quot;:0,&quot;b&quot;:1,&quot;c&quot;:2,&quot;d&quot;:3&#125;)); //输出 ：[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]</span><br><span class="line">console.log(Reflect.ownKeys([])); // [&quot;length&quot;]</span><br><span class="line">var sym = Symbol.for(&quot;comet&quot;);</span><br><span class="line">var sym2 = Symbol.for(&quot;meteor&quot;);</span><br><span class="line">var obj = &#123;[sym]: 0, &quot;str&quot;: 0, &quot;773&quot;: 0, &quot;0&quot;: 0,</span><br><span class="line">    [sym2]: 0, &quot;-1&quot;: 0, &quot;8&quot;: 0, &quot;second str&quot;: 0&#125;;</span><br><span class="line">Reflect.ownKeys(obj); //输出：/ [ &quot;0&quot;, &quot;8&quot;, &quot;773&quot;, &quot;str&quot;, &quot;-1&quot;, &quot;second str&quot;, Symbol(comet), Symbol(meteor) ]</span><br></pre></td></tr></table></figure></p>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>ES6提供了新的数据结构Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。<br>Set函数可以接受一个数组（或类似数组的对象）作为参数，用来初始化。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let list = new Set();</span><br><span class="line">  list.add(5);</span><br><span class="line">  list.add(7);</span><br><span class="line"></span><br><span class="line">  console.log(&apos;size&apos;,list.size);//2</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  let arr = [1,2,3,4,5];</span><br><span class="line">  let list = new Set(arr);</span><br><span class="line"></span><br><span class="line">  console.log(&apos;size&apos;,list.size);//5</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  let list = new Set();</span><br><span class="line">  list.add(1);</span><br><span class="line">  list.add(2);</span><br><span class="line">  list.add(1);</span><br><span class="line"></span><br><span class="line">  console.log(&apos;list&apos;,list);//list Set &#123; 1, 2 &#125;</span><br><span class="line"></span><br><span class="line">  let arr=[1,2,3,1,&apos;2&apos;];//unique Set &#123; 1, 2, 3, &apos;2&apos; &#125;</span><br><span class="line">  let list2=new Set(arr);</span><br><span class="line"></span><br><span class="line">  console.log(&apos;unique&apos;,list2);</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  let arr=[&apos;add&apos;,&apos;delete&apos;,&apos;clear&apos;,&apos;has&apos;];</span><br><span class="line">  let list=new Set(arr);</span><br><span class="line"></span><br><span class="line">  console.log(&apos;has&apos;,list.has(&apos;add&apos;));//has true</span><br><span class="line">  console.log(&apos;delete&apos;,list.delete(&apos;add&apos;),list);//delete true Set &#123; &apos;delete&apos;, &apos;clear&apos;, &apos;has&apos; &#125;</span><br><span class="line">  list.clear();</span><br><span class="line">  console.log(&apos;list&apos;,list);//list Set &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  let arr=[&apos;add&apos;,&apos;delete&apos;,&apos;clear&apos;,&apos;has&apos;];</span><br><span class="line">  let list=new Set(arr);</span><br><span class="line"></span><br><span class="line">  for(let key of list.keys())&#123;</span><br><span class="line">    console.log(&apos;keys&apos;,key);</span><br><span class="line">  &#125;</span><br><span class="line">  /*</span><br><span class="line">  keys add</span><br><span class="line">  keys delete</span><br><span class="line">  keys clear</span><br><span class="line">  keys has</span><br><span class="line">  */</span><br><span class="line">  for(let value of list.values())&#123;</span><br><span class="line">    console.log(&apos;value&apos;,value);</span><br><span class="line">  &#125;</span><br><span class="line">  /*</span><br><span class="line">  value add</span><br><span class="line">  value delete</span><br><span class="line">  value clear</span><br><span class="line">  value has</span><br><span class="line">  */</span><br><span class="line">  for(let [key,value] of list.entries())&#123;</span><br><span class="line">    console.log(&apos;entries&apos;,key,value);</span><br><span class="line">  &#125;</span><br><span class="line">  /*</span><br><span class="line">  entries add add</span><br><span class="line">  entries delete delete</span><br><span class="line">  entries clear clear</span><br><span class="line">  entries has has</span><br><span class="line">  */</span><br><span class="line">  list.forEach(function(item)&#123;console.log(item);&#125;)</span><br><span class="line">  /*</span><br><span class="line">  add</span><br><span class="line">  delete</span><br><span class="line">  clear</span><br><span class="line">  has</span><br><span class="line">  */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Set实现并集，交集，差集"><a href="#Set实现并集，交集，差集" class="headerlink" title="Set实现并集，交集，差集"></a>Set实现并集，交集，差集</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let set1  = new Set([1,2,3,4,5,6]);</span><br><span class="line">let set2  = new Set([4,5,6,7,8,9]);</span><br><span class="line"></span><br><span class="line">//并集</span><br><span class="line">let union = new Set([...set1,...set2]);</span><br><span class="line">//[1,2,3,4,5,6,7,8,9]</span><br><span class="line">//交集</span><br><span class="line">let intersect = new Set([...set1].filter(x =&gt; b.has(s)));</span><br><span class="line">//[4,5,6]</span><br><span class="line">//差集</span><br><span class="line">let intersect = new Set([...set1].filter(x =&gt; !b.has(s)));</span><br><span class="line">//[1,2,3,4]</span><br></pre></td></tr></table></figure>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let map = new Map();</span><br><span class="line">  let arr=[&apos;123&apos;];</span><br><span class="line"></span><br><span class="line">  map.set(arr,456);</span><br><span class="line"></span><br><span class="line">  console.log(&apos;map&apos;,map,map.get(arr));//map Map &#123; [ &apos;123&apos; ] =&gt; 456 &#125; 456</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  let map = new Map([[&apos;a&apos;,123],[&apos;b&apos;,456]]);</span><br><span class="line">  console.log(&apos;map args&apos;,map);//map args Map &#123; &apos;a&apos; =&gt; 123, &apos;b&apos; =&gt; 456 &#125;</span><br><span class="line">  console.log(&apos;size&apos;,map.size);//size 2</span><br><span class="line">  console.log(&apos;delete&apos;,map.delete(&apos;a&apos;),map);//delete true Map &#123; &apos;b&apos; =&gt; 456 &#125;</span><br><span class="line">  console.log(&apos;clear&apos;,map.clear(),map);clear undefined Map &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="WeakMap、WeakSet"><a href="#WeakMap、WeakSet" class="headerlink" title="WeakMap、WeakSet"></a>WeakMap、WeakSet</h2><p>他们对值的引用都是不计入垃圾回收机制的，所以名字里才会有一个weak，表示这个弱引用<br>下面以 WeakMap 为例，看看它是怎么解决内存泄漏的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const wm = new WeakMap();</span><br><span class="line">const element = document.getElementById(&apos;example&apos;);</span><br><span class="line">vm.set(element,&apos;something&apos;);</span><br><span class="line">vm.get(element);</span><br></pre></td></tr></table></figure></p>
<p>先新建一个 Weakmap 实例。然后，将一个 DOM 节点作为键名存入该实例，并将一些附加信息作为键值，一起存放在 WeakMap 里面。这时，WeakMap 里面对element的引用就是弱引用，不会被计入垃圾回收机制。</p>
<p>也就是说，DOM 节点对象的引用计数是1，而不是2。这时，一旦消除对该节点的引用，它占用的内存就会被垃圾回收机制释放。Weakmap 保存的这个键值对，也会自动消失。</p>
<p>基本上，如果你要往对象上添加数据，又不想干扰垃圾回收机制，就可以使用 WeakMap</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  <div>
    
  </div>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nohomeman.github.io/ES6的迁移之路-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="NoHomeMan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/background.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoHomeMan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ES6的迁移之路-3/" itemprop="url">ES6的迁移之路---[3]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-28T15:59:40+08:00">
                2018-09-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/ES6的迁移之路-3/#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://nohomeman.github.io/ES6的迁移之路-3/" class="cy_cmt_count" data-xid="ES6的迁移之路-3/" itemprop="commentsCount" ></span>
                </a>
              
            
          

          
          
             <span id="/ES6的迁移之路-3/" class="leancloud_visitors" data-flag-title="ES6的迁移之路---[3]">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
             <span class="post-meta-divider">|</span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  804
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>接着数据类型这块<code>Array</code>、<code>Object</code>、<code>function</code></p>
<h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><p>Array.of()方法基本上可以用来替代Array()或new Array()，并且不存在由于参数不同而导致的重载。它的行为非常统一。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let arr = Array.of(3,4,7,9,11);</span><br><span class="line">  console.log(&apos;arr=&apos;,arr);</span><br><span class="line"></span><br><span class="line">  let empty=Array.of();</span><br><span class="line">  console.log(&apos;empty&apos;,empty);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>　Array.from()方法就是将一个类数组对象或者可遍历对象转换成一个真正的数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let arrayLike = &#123;</span><br><span class="line">    0: &apos;tom&apos;,</span><br><span class="line">    1: &apos;65&apos;,</span><br><span class="line">    2: &apos;男&apos;,</span><br><span class="line">    3: [&apos;jane&apos;,&apos;john&apos;,&apos;Mary&apos;],</span><br><span class="line">    &apos;length&apos;: 4</span><br><span class="line">&#125;</span><br><span class="line">let arr = Array.from(arrayLike)</span><br><span class="line">console.log(arr) // [&apos;tom&apos;,&apos;65&apos;,&apos;男&apos;,[&apos;jane&apos;,&apos;john&apos;,&apos;Mary&apos;]]</span><br><span class="line"></span><br><span class="line">  console.log(Array.from([1,3,5],function(item)&#123;return item*2&#125;));//[ 2, 6, 10 ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Array.fill()有三个参数分别是覆盖的值，以及覆盖范围<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  console.log(&apos;fill-7&apos;,[1,&apos;a&apos;,undefined].fill(7));//fill-7 [ 7, 7, 7 ]</span><br><span class="line">  console.log(&apos;fill,pos&apos;,[&apos;a&apos;,&apos;b&apos;,&apos;c&apos;].fill(7,1,3));//fill,pos [ &apos;a&apos;, 7, 7 ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>获取Array的相关数据<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  for(let index of [&apos;1&apos;,&apos;c&apos;,&apos;ks&apos;].keys())&#123;</span><br><span class="line">    console.log(index);</span><br><span class="line">  &#125;//0;1;2</span><br><span class="line">  for(let value of [&apos;1&apos;,&apos;c&apos;,&apos;ks&apos;].values())&#123;</span><br><span class="line">    console.log(value);//1;c;ks</span><br><span class="line">  &#125;</span><br><span class="line">  for(let [index,value] of [&apos;1&apos;,&apos;c&apos;,&apos;ks&apos;].entries())&#123;</span><br><span class="line">    console.log(index,value);0,1;1,c;2,ks</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>查找Array数据的api<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//Array.prototype.copyWithin(target, start = 0, end = this.length)</span><br><span class="line">&#123;</span><br><span class="line">  console.log([1,2,3,4,5].copyWithin(0,3,4));//[4,2,3,4,5]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  console.log([1,2,3,4,5,6].find(function(item)&#123;return item&gt;3&#125;));//4</span><br><span class="line">  console.log([1,2,3,4,5,6].findIndex(function(item)&#123;return item&gt;3&#125;));//3</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  console.log(&apos;number&apos;,[1,2,NaN].includes(1));//true</span><br><span class="line">  console.log(&apos;number&apos;,[1,2,NaN].includes(NaN));//true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><p>在说Object新增了哪些api之前我先说说，es6的一些简易写法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 简洁表示法</span><br><span class="line">  let o=1;</span><br><span class="line">  let k=2;</span><br><span class="line">  let es5=&#123;</span><br><span class="line">    o:o,</span><br><span class="line">    k:k</span><br><span class="line">  &#125;;</span><br><span class="line">  let es6=&#123;</span><br><span class="line">    o,</span><br><span class="line">    k</span><br><span class="line">  &#125;;</span><br><span class="line">  console.log(es5,es6);</span><br><span class="line"></span><br><span class="line">  let es5_method=&#123;</span><br><span class="line">    hello:function()&#123;</span><br><span class="line">      console.log(&apos;hello&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  let es6_method=&#123;</span><br><span class="line">    hello()&#123;</span><br><span class="line">      console.log(&apos;hello&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  console.log(es5_method.hello(),es6_method.hello());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来是属性表达式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 属性表达式</span><br><span class="line">  let a=&apos;b&apos;;</span><br><span class="line">  let es5_obj=&#123;</span><br><span class="line">    a:&apos;c&apos;,</span><br><span class="line">    b:&apos;c&apos;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  let es6_obj=&#123;</span><br><span class="line">    [a]:&apos;c&apos;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  console.log(es5_obj,es6_obj);//&#123; a: &apos;c&apos;, b: &apos;c&apos; &#125; &#123; b: &apos;c&apos; &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>新增的api<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 新增API</span><br><span class="line">  console.log(&apos;字符串&apos;,Object.is(&apos;abc&apos;,&apos;abc&apos;),&apos;abc&apos;===&apos;abc&apos;);//字符串 true true</span><br><span class="line">  console.log(&apos;数组&apos;,Object.is([],[]),[]===[]);//数组 false false</span><br><span class="line"></span><br><span class="line">  console.log(&apos;拷贝&apos;,Object.assign(&#123;a:&apos;a&apos;&#125;,&#123;b:&apos;b&apos;&#125;));//拷贝 &#123; a: &apos;a&apos;, b: &apos;b&apos; &#125;</span><br><span class="line"></span><br><span class="line">  let test=&#123;k:123,o:456&#125;;</span><br><span class="line">  for(let [key,value] of Object.entries(test))&#123;</span><br><span class="line">    console.log([key,value]);//[ &apos;k&apos;, 123 ][ &apos;o&apos;, 456 ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>扩展运算符reset写法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   let &#123;a,b,...c&#125;=&#123;a:&apos;test&apos;,b:&apos;kill&apos;,c:&apos;ddd&apos;,d:&apos;ccc&apos;&#125;;</span><br><span class="line">   console.log(a,b,c);//test ,kill, &#123; c: &apos;ddd&apos;, d: &apos;ccc&apos; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><p>函数默认值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  function test(x, y = &apos;world&apos;)&#123;</span><br><span class="line">    console.log(&apos;默认值&apos;,x,y);//默认值 hello world</span><br><span class="line">  &#125;</span><br><span class="line">  test(&apos;hello&apos;);</span><br><span class="line">  test(&apos;hello&apos;,&apos;kill&apos;);//默认值 hello kill</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  let x=&apos;test&apos;;</span><br><span class="line">  function test2(x,y=x)&#123;</span><br><span class="line">    console.log(&apos;作用域&apos;,x,y);</span><br><span class="line">  &#125;</span><br><span class="line">  test2(&apos;kill&apos;);//作用域 kill kill</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>函数reset参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  function test3(...arg)&#123;</span><br><span class="line">    for(let v of arg)&#123;</span><br><span class="line">      console.log(&apos;rest&apos;,v);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  test3(1,2,3,4,&apos;a&apos;);//rest 1 rest 2 rest 3 rest 4 rest a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  console.log(...[1,2,4]);//124</span><br><span class="line">  console.log(&apos;a&apos;,...[1,2,4]);//a123</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>箭头函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let arrow = v =&gt; v*2;</span><br><span class="line">  let arrow2 = () =&gt; 5;</span><br><span class="line">  console.log(&apos;arrow&apos;,arrow(3));//arrow 6</span><br><span class="line">  console.log(arrow2());// 5</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  <div>
    
  </div>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nohomeman.github.io/ES6的迁移之路-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="NoHomeMan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/background.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoHomeMan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ES6的迁移之路-2/" itemprop="url">ES6的迁移之路---[2]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-19T14:52:26+08:00">
                2018-09-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/ES6的迁移之路-2/#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://nohomeman.github.io/ES6的迁移之路-2/" class="cy_cmt_count" data-xid="ES6的迁移之路-2/" itemprop="commentsCount" ></span>
                </a>
              
            
          

          
          
             <span id="/ES6的迁移之路-2/" class="leancloud_visitors" data-flag-title="ES6的迁移之路---[2]">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
             <span class="post-meta-divider">|</span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,648
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  8
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>接着写没写完的！今天主要针对的是数据类型的迁移、这一篇主要针对<code>Number</code>、<code>String</code></p>
<h2 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h2><h3 id="二进制和八进制的新的表示方法"><a href="#二进制和八进制的新的表示方法" class="headerlink" title="二进制和八进制的新的表示方法"></a>二进制和八进制的新的表示方法</h3><blockquote>
<p>二进制以’0b’或者’0B’开头<br>八进制以’0o’或者’0O’开头</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0b111110111 === 503 // true</span><br><span class="line">0o767 === 503 // true</span><br><span class="line">//二进制和八进制转化为十进制</span><br><span class="line">Number(&apos;0b111&apos;)  // 7</span><br><span class="line">Number(&apos;0o10&apos;)  // 8</span><br></pre></td></tr></table></figure>
<h3 id="Number对象新增的方法"><a href="#Number对象新增的方法" class="headerlink" title="Number对象新增的方法"></a>Number对象新增的方法</h3><p>Number.isFinite()检测一个数值是不是有限的,只有数字且是有限的才会返回true,否则一律是false<br>Number.isNaN(),检测一个数值是不是NaN,只有数字且是NaN的时候才会返回true,否则一律false</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  Number.isFinite(123);  // true</span><br><span class="line">  Number.isFinite(&quot;123&quot;);  // false</span><br><span class="line">  Number.isFinite(&quot;sd&quot;);  // false</span><br><span class="line">  Number.isNaN(NaN);  //true</span><br><span class="line">  Number.isNaN(123);  //false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Number.parseInt(),Number.parseFloat()将全局的parseInt和parseFloat移植到Number对象上,行为不变<br>Number.isInteger(),判断数值是不是整数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 3.0000000000000002达到了小数点后16个10进制位数,转换为2进制就超出了2^53,所以最后一个2被忽略了,仍然被认为是整数</span><br><span class="line">Number.isInteger(3.0000000000000002) // true</span><br><span class="line">console.log(&apos;25&apos;,Number.isInteger(25));// true</span><br><span class="line">console.log(&apos;25.0&apos;,Number.isInteger(25.0));//true</span><br><span class="line">console.log(&apos;25.1&apos;,Number.isInteger(25.1));//false</span><br><span class="line">console.log(&apos;25.1&apos;,Number.isInteger(&apos;25&apos;));//false</span><br></pre></td></tr></table></figure></p>
<p>Number.EPSILON,是一个常量,表示1和大于1的最小浮点数的差</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Number.EPSILON === Math.pow(2,-52);     // true</span><br></pre></td></tr></table></figure>
<p>Number.isSafeInteger(),判断一个整数是不是在常量Number.MIN_SAFE_INTEGER和Number.MAX_SAFE_INTEGER之间,包括2端<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  console.log(Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);</span><br><span class="line">  console.log(&apos;10&apos;,Number.isSafeInteger(10));//true</span><br><span class="line">  console.log(&apos;a&apos;,Number.isSafeInteger(&apos;a&apos;));//false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Math对象的拓展"><a href="#Math对象的拓展" class="headerlink" title="Math对象的拓展"></a>Math对象的拓展</h3><p>Math.trunc()方法用于去除一个数的小数部分，返回整数部分。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  console.log(4.1,Math.trunc(4.1));//4</span><br><span class="line">  console.log(4.9,Math.trunc(4.9));//4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意<label style="color:orange">参数为非数值时，Math.trunc()方法会先用Number()将其转换为数值，若无法获取数值的整数部分，比如字符串或NaN或空值等，会返回NaN.</label><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(Math.trunc(NaN),Math.trunc(&apos;foo&apos;),Math.trunc())//NaN,NaN,NaN</span><br></pre></td></tr></table></figure></p>
<p>Math.sign()方法用来判断一个数到底是正数、负数还是0</p>
<blockquote>
<p>(1)参数为正数返回+1<br>(2)参数为负数返回-1<br>(3)参数为0返回0<br>(4)参数为-0返回-0<br>(5)其他值返回NaN</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">console.log(</span><br><span class="line">  Math.sign(-5),</span><br><span class="line">  Math.sign(5),</span><br><span class="line">  Math.sign(0),</span><br><span class="line">  Math.sign(NaN),</span><br><span class="line">  Math.sign(&apos;aaa&apos;),</span><br><span class="line">  Math.sign()</span><br><span class="line">  )//-1,1,0,NaN,NaN,NaN</span><br></pre></td></tr></table></figure>
<p>Math.cbrt()方法用于计算一个数的立方根</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  console.log(&apos;-1&apos;,Math.cbrt(-1));-1</span><br><span class="line">  console.log(&apos;8&apos;,Math.cbrt(8));2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Math.hypot()方法返回所有参数的平方和的平方根。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Math.hypot(3,4)//5</span><br><span class="line">Math.hypot(3,4,5)//7.07106</span><br><span class="line">Math.hypot()//0</span><br><span class="line">Math.hypot(NaN)//NaN</span><br><span class="line">Math.hypot(3,4,&apos;foo&apos;)//NaN</span><br><span class="line">Math.hypot(3,4,&apos;5&apos;)//7.07106</span><br><span class="line">Math.hypot(-3)//3</span><br></pre></td></tr></table></figure></p>
<p>注意<label style="color:orange">Math.hypot()会把非数值参数转换为数值，若有一个参数不能转为数值就返回NaN.</label></p>
<ul>
<li><p>ES6新增了6个三角函数方法.</p>
<blockquote>
<p>(1)Math.sinh(x) 返回x的双曲正弦<br>(2)Math.cosh(x) 返回x的双曲余弦<br>(3)Math.tanh(x) 返回x的双曲正切<br>(4)Math.asinh(x) 返回x的反双曲正弦<br>(5)Math.acosh(x) 返回x的反双曲余切<br>(6)Math.atanh(x) 返回x的反双曲正切</p>
</blockquote>
</li>
<li><p>ES7增加了一个指数运算符**,可以与等号结合</p>
<blockquote>
<p>2**3//8<br>let a=2;<br>a**=2;//等价于a=a**a;</p>
</blockquote>
</li>
</ul>
<h2 id="String类型"><a href="#String类型" class="headerlink" title="String类型"></a>String类型</h2><h3 id="includes-startsWith-endsWith"><a href="#includes-startsWith-endsWith" class="headerlink" title="includes(), startsWith(), endsWith()"></a>includes(), startsWith(), endsWith()</h3><p>从字面就可以明白，一个是看是否包含子串，一个是是否以子串开头，一个是是否以子串结尾。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let s = &apos;Hello world!&apos;;</span><br><span class="line"></span><br><span class="line">s.startsWith(&apos;Hello&apos;) // true</span><br><span class="line">s.endsWith(&apos;!&apos;) // true</span><br><span class="line">s.includes(&apos;o&apos;) // true</span><br></pre></td></tr></table></figure></p>
<p>includes()比indexOf()的优势在于，indexOf()的返回结果不是布尔值，须与-1对比，不够直观。<br>这三个方法都支持第二个参数，表示从哪里开始检索。</p>
<p>其中，includes()和startsWith()的默认值是0，表示检索范围是参数值检索到末尾，很简单不多说。</p>
<p>endsWith()很特殊，它第二个参数的默认值是字符串总长度值，表示检索范围是从开头检索到这个值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let s = &apos;Hello world!&apos;;</span><br><span class="line"></span><br><span class="line">s.includes(&apos;Hello&apos;, 6) // false 从左起第6位到末尾的范围内检索，结果是没找到</span><br><span class="line">s.startsWith(&apos;world&apos;, 6) // true 从左起第6位到末尾，看看是不是以world开头，结果是</span><br><span class="line">s.endsWith(&apos;Hello&apos;, 8) // false 从开头找到第8位，看看是不是以Hello结束，结果不是</span><br></pre></td></tr></table></figure></p>
<h3 id="repeat"><a href="#repeat" class="headerlink" title="repeat()"></a>repeat()</h3><p>表示重复多少次。</p>
<p>如果参数是正小数，会取整。<br>如果参数是负数，会报错。<br>如果参数是0，会得到空串。<br>如果参数是字符串、布尔型或其他类型，会先换算成整数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let str=&quot;abc&quot;;</span><br><span class="line">  console.log(str.repeat(2));//abcabc</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="padStart-，padEnd"><a href="#padStart-，padEnd" class="headerlink" title="padStart()，padEnd()"></a>padStart()，padEnd()</h3><p>这两个是ES8（也就是2017）新增方法<br>用于在开头补全字符和在末尾补全字符，padStart和padEnd一共接受两个参数，第一个参数用来指定字符串的最小长度，第二个参数是用来补全的字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  console.log(&apos;1&apos;.padStart(2,&apos;0&apos;));//01</span><br><span class="line">  console.log(&apos;1&apos;.padEnd(2,&apos;0&apos;));//10</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="重点模板字符串"><a href="#重点模板字符串" class="headerlink" title="重点模板字符串"></a><label style="color:orange">重点模板字符串</label></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let name=&quot;list&quot;;</span><br><span class="line">  let info=&quot;hello world&quot;;</span><br><span class="line">  let m=`i am $&#123;name&#125;,$&#123;info&#125;`;</span><br><span class="line">  console.log(m);//i am list,hellow world</span><br><span class="line"></span><br><span class="line">  let user=&#123;</span><br><span class="line">    name:&apos;list&apos;,</span><br><span class="line">    info:&apos;hello world&apos;</span><br><span class="line">  &#125;;</span><br><span class="line">  console.log(abc`i am $&#123;user.name&#125;,$&#123;user.info&#125;`);//abci am list,hellow world</span><br><span class="line"></span><br><span class="line">  console.log(String.raw`Hi\n$&#123;1+2&#125;`);//Hi\n3</span><br><span class="line">  console.log(`Hi\n$&#123;1+2&#125;`);//h(换行了)3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以看出，现在这种写法更加的友好了。<br>比如有一段HTML是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;page&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;a target=&quot;_blank&quot; class=&quot;news-link&quot; href=&quot;/news/92199/nodemon-1-14-8&quot;&gt;Nodemon v1.14.8 发布&lt;/a&gt;</span><br><span class="line">    &lt;span class=&quot;box-fr news-date&quot;&gt;01/07&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  ... 重复若干个div.box</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>我就可以设一个返回最终HTML的函数，这个函数使用了ES6的简写方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const createTmpl = boxes =&gt; `</span><br><span class="line">&lt;div class=&quot;page&quot;&gt;</span><br><span class="line">  $&#123;boxes.map(box =&gt; `</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;a target=&quot;_blank&quot; class=&quot;news-link&quot; href=&quot;$&#123;box.href&#125;&quot;&gt;$&#123;box.title&#125;&lt;/a&gt;</span><br><span class="line">    &lt;span class=&quot;box-fr news-date&quot;&gt;$&#123;box.date&#125;&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  `).join(&apos;&apos;)&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">`;</span><br><span class="line"></span><br><span class="line">let boxdata = [</span><br><span class="line">    &#123;href: &quot;http://...1&quot;, title: &quot;biaoti1&quot;, date: &quot;01/08&quot;&#125;,</span><br><span class="line">    &#123;href: &quot;http://...2&quot;, title: &quot;biaoti2&quot;, date: &quot;02/08&quot;&#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">createTmpl(boxdata);</span><br></pre></td></tr></table></figure></p>
<p>然后传入数据，调用函数，得到：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&quot;</span><br><span class="line">&lt;div class=&quot;page&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;a target=&quot;_blank&quot; class=&quot;news-link&quot; href=&quot;http://...1&quot;&gt;biaoti1&lt;/a&gt;</span><br><span class="line">    &lt;span class=&quot;box-fr news-date&quot;&gt;01/08&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;a target=&quot;_blank&quot; class=&quot;news-link&quot; href=&quot;http://...2&quot;&gt;biaoti2&lt;/a&gt;</span><br><span class="line">    &lt;span class=&quot;box-fr news-date&quot;&gt;02/08&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&quot;</span><br></pre></td></tr></table></figure></p>
<p>今天就写到这里吧，下次给大家带来Array、Object、Function的变化</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  <div>
    
  </div>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nohomeman.github.io/JavaScript学习之浅谈函数柯里化-Currying/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="NoHomeMan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/background.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoHomeMan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/JavaScript学习之浅谈函数柯里化-Currying/" itemprop="url">JavaScript学习之浅谈函数柯里化(Currying)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-18T14:32:22+08:00">
                2018-09-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/JavaScript学习之浅谈函数柯里化-Currying/#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://nohomeman.github.io/JavaScript学习之浅谈函数柯里化-Currying/" class="cy_cmt_count" data-xid="JavaScript学习之浅谈函数柯里化-Currying/" itemprop="commentsCount" ></span>
                </a>
              
            
          

          
          
             <span id="/JavaScript学习之浅谈函数柯里化-Currying/" class="leancloud_visitors" data-flag-title="JavaScript学习之浅谈函数柯里化(Currying)">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
             <span class="post-meta-divider">|</span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,283
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近是想着坚实一下自己JS的基础，所以想着看看原生的知识。</p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>在这里先说说什么是函数柯里化。</p>
<ul>
<li>什么是函数柯里化<blockquote>
<p>在一个函数中首先填充几个参数(然后再返回一个新函数)的技术称为柯里化(Currying)。(来自《JavaScript忍者秘籍》一书中)</p>
</blockquote>
</li>
</ul>
<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>这里有两个例子可以帮助理解！<br>最简单的加法函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//函数定义</span><br><span class="line">function add(x,y)&#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;</span><br><span class="line">//函数调用</span><br><span class="line">add(3,4);//5</span><br></pre></td></tr></table></figure></p>
<p>如果采用柯里化是怎样将接受两个参数的函数变成接受单一参数的函数呢，其实很简单如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//函数表达式定义</span><br><span class="line">var add = function(x)&#123;</span><br><span class="line">    return function(y)&#123;</span><br><span class="line">        return x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">//函数调用</span><br><span class="line">add(3)(4);</span><br></pre></td></tr></table></figure></p>
<p>其实实质利用的就是闭包的概念。</p>
<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><p>本质上讲柯里化(Currying)只是一个理论模型，柯里化所要表达是:如果你固定某些参数，你将得到接受余下参数的一个函数,所以对于有两个变量的函数<code>y^x</code>，如果固定了<code>y=2</code>，则得到有一个变量的函数<code>2^x</code>。这就是求值策略中的部分求值策略。<br>柯里化(Currying)具有：延迟计算、参数复用、动态生成函数的作用。</p>
<h2 id="JS中bind-与函数柯里化"><a href="#JS中bind-与函数柯里化" class="headerlink" title="JS中bind()与函数柯里化"></a>JS中bind()与函数柯里化</h2><p>其实在实际使用中使用最多的一个柯里化的例子就是<code>Function.prototype.bind()</code>函数，我们也一并给出一个较为简单的<code>Function.prototype.bind()</code>函数的实现方式。</p>
<label style="color:orange">绑定函数bind()最简单的用法是创建一个函数，使这个函数不论怎么调用都有同样的this值。不同于call和apply只是单纯地设置this的值后传参，它还会将所有传入bind()方法中的实参（第一个参数之后的参数）与this一起绑定。</label>

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">//《JS权威指南》原文的例子</span><br><span class="line">var sum = function(x,y) &#123; return x + y &#125;;</span><br><span class="line"></span><br><span class="line">var succ = sum.bind(null, 1); //让this指向null，其后的实参也会作为实参传入被绑定的函数sum</span><br><span class="line"></span><br><span class="line">succ(2); // =&gt; 3: 可以看到1绑定到了sum函数中的x</span><br><span class="line"></span><br><span class="line">//传入bind中的实参都会绑定到原函数的形参</span><br><span class="line">function func(a,b,c,d)&#123;...&#125;  //func的length为4</span><br><span class="line"></span><br><span class="line">var after = func.bind(null,1,2);  //这里输入了两个实参（1，2）绑定到了func函数的a，b</span><br><span class="line"></span><br><span class="line">console.log(after.length);  //after的length为2</span><br><span class="line"></span><br><span class="line">//当bind()所返回的函数用作构造函数的时候， 传入bind()的this将被忽略，实参会全部传入原函数</span><br><span class="line">function original(x)&#123;</span><br><span class="line">  this.a = 1;</span><br><span class="line">  this.b = function()&#123;return this.a + x&#125;</span><br><span class="line">&#125;</span><br><span class="line">var obj=&#123;</span><br><span class="line">  a = 10</span><br><span class="line">&#125;</span><br><span class="line">var newObj = new(original.bind(obj, 2)); //传入了一个实参2</span><br><span class="line"></span><br><span class="line">console.log(newObj.a);  //输出1, 说明返回的函数用作构造函数时obj(this的值)被忽略了</span><br><span class="line">console.log(newObj.b()); //输出3 ，说明传入的实参2传入了原函数original</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">简单的`Function.prototype.bind()`函数的实现方式。</span><br><span class="line">Function.prototype.bind = function()&#123;</span><br><span class="line">    var fn = this;</span><br><span class="line">    var args = Array.prototye.slice.call(arguments);</span><br><span class="line">    var context = args.shift();</span><br><span class="line"></span><br><span class="line">    return function()&#123;</span><br><span class="line">        return fn.apply(context,</span><br><span class="line">            args.concat(Array.prototype.slice.call(arguments)));</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="实战演练一道关于闭包和函数的柯里化方面的编程题目"><a href="#实战演练一道关于闭包和函数的柯里化方面的编程题目" class="headerlink" title="实战演练一道关于闭包和函数的柯里化方面的编程题目"></a>实战演练一道关于闭包和函数的柯里化方面的编程题目</h2><p>编程题目的要求如下，完成plus函数，通过全部的测试用例。<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&apos;use strict&apos;;</span><br><span class="line">function plus(n)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">module.exports = plus</span><br></pre></td></tr></table></figure></p>
<p>  测试用例如下</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&apos;use strict&apos;;</span><br><span class="line">var assert = require(&apos;assert&apos;)</span><br><span class="line"></span><br><span class="line">var plus = require(&apos;../lib/assign-4&apos;)</span><br><span class="line"></span><br><span class="line">describe(&apos;闭包应用&apos;,function()&#123;</span><br><span class="line">  it(&apos;plus(0) === 0&apos;,function()&#123;</span><br><span class="line">    assert.equal(0,plus(0).toString())</span><br><span class="line">  &#125;)</span><br><span class="line">  it(&apos;plus(1)(1)(2)(3)(5) === 12&apos;,function()&#123;</span><br><span class="line">    assert.equal(12,plus(1)(1)(2)(3)(5).toString())</span><br><span class="line">  &#125;)</span><br><span class="line">  it(&apos;plus(1)(4)(2)(3) === 10&apos;,function()&#123;</span><br><span class="line">    assert.equal(10,plus(1)(4)(2)(3).toString())</span><br><span class="line">  &#125;)</span><br><span class="line">  it(&apos;方法引用&apos;,function()&#123;</span><br><span class="line">    var plus2 = plus(1)(1)</span><br><span class="line">    assert.equal(12,plus2(1)(4)(2)(3).toString())</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>  根据测试用例我们可以发现，plus函数的要求就是接受单一函数，例如：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plus(1)(4)(2)(3).toString()</span><br></pre></td></tr></table></figure></p>
<p>  但是与柯里化不同之处在于，柯里化返回的一个新函数。我们观察其实最后的求值是通过toString函数得到的，那么我们就很容易想到，我们可以给返回的函数增加一个toString属性就可以了。答案如下：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&apos;use strict&apos;;</span><br><span class="line"></span><br><span class="line">function plus(num) &#123;</span><br><span class="line">    var adder = function () &#123;</span><br><span class="line">        var _args = [];</span><br><span class="line">        var _adder = function _adder() &#123;</span><br><span class="line">            [].push.apply(_args, [].slice.call(arguments));</span><br><span class="line">            return _adder;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        _adder.toString = function () &#123;</span><br><span class="line">            return _args.reduce(function (a, b) &#123;</span><br><span class="line">                return a + b;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return _adder;</span><br><span class="line">    &#125;</span><br><span class="line">    return adder()(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = plus;</span><br></pre></td></tr></table></figure></p>
<p>  运行一下,通过全部的测试用例，需要注意的是由于题目的要求运行在严格模式下，所以我们在_adder函数内部是不能引用arguments.callee，这时我们采用的方法是给函数表达式中函数本身起名_adder，这样就解决的这个问题。</p>
<h2 id="希望大家能从中或多或少学到一些东西，入行资历甚浅，不足之处请多指教！"><a href="#希望大家能从中或多或少学到一些东西，入行资历甚浅，不足之处请多指教！" class="headerlink" title="希望大家能从中或多或少学到一些东西，入行资历甚浅，不足之处请多指教！"></a><label style="color:red">希望大家能从中或多或少学到一些东西，入行资历甚浅，不足之处请多指教！</label></h2>
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  <div>
    
  </div>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nohomeman.github.io/ES6的迁移之路/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="NoHomeMan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/background.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoHomeMan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ES6的迁移之路/" itemprop="url">ES6的迁移之路---[1]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-30T15:43:45+08:00">
                2018-08-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/ES6的迁移之路/#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://nohomeman.github.io/ES6的迁移之路/" class="cy_cmt_count" data-xid="ES6的迁移之路/" itemprop="commentsCount" ></span>
                </a>
              
            
          

          
          
             <span id="/ES6的迁移之路/" class="leancloud_visitors" data-flag-title="ES6的迁移之路---[1]">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
             <span class="post-meta-divider">|</span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,437
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  6
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>  现在前端这个大环境，如果不会ES6还真算是落伍了。今天我就将一些常用的一些有关ES6的一些常用的语法糖，和新添加的一些特性一一列出来。</p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>  往往使用ES6开发的前端应用都是要依赖babel这个工具包的(为什么使用babel呢！当然因为为了我们的项目更好的兼容)。至于bable是干什么的！大家可以<a href="https://www.babeljs.cn/" target="_blank" rel="noopener">点击这个</a>!话不多说，接下来为大家es6为我们提供的一系列语法糖！</p>
<h2 id="块级作用域、let和const的用法"><a href="#块级作用域、let和const的用法" class="headerlink" title="块级作用域、let和const的用法"></a>块级作用域、let和const的用法</h2><p>  什么是块级作用域！<br>  {}中就是一个块级作用域！<br>  我们可以用它替代我们的(fun)()<br>  es6以前我们什么一个变量，往往都是使用var。但是ES6中官方为我们推荐了let，const，两者到底有什么区别呢？<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function test()&#123;</span><br><span class="line">  for(let i=1;i&lt;3;i++)&#123;</span><br><span class="line">    console.log(i);</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(i);</span><br><span class="line">  let a = 2 ;</span><br><span class="line">  a = 3;</span><br><span class="line">  console.log(a)</span><br><span class="line">&#125;</span><br><span class="line">test()    //1,2  3</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>从这个函数输出的情况可以看出，我们只输出了for循环中的变量。这里就可以看出let只能在同一个块级作用域才能有效声明。<br>  同时我们的变量a也随这我们的改变改变了！</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function first()&#123;</span><br><span class="line">  const PI=3.1415926;</span><br><span class="line">  PI = 3;</span><br><span class="line">  console.log(PI);</span><br><span class="line">&#125;</span><br><span class="line">function last()&#123;</span><br><span class="line">  const k=&#123;</span><br><span class="line">    a:1</span><br><span class="line">  &#125;</span><br><span class="line">  k.b=3;</span><br><span class="line">  console.log(k);</span><br><span class="line">&#125;</span><br><span class="line">first()// 报错SyntaxError: &quot;PI&quot; is read-only</span><br><span class="line">last() //&#123;a:1,b:3&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>前者可以看出const声明出来的变量不能进行修改，否则就会报错。<br>  后者就是正常的输出了我们想要的一个object。<br>  使用 let 声明一个可以改变的变量，用 const 声明一个不能被重新赋值的变量。</p>
</blockquote>
<h2 id="结构赋值"><a href="#结构赋值" class="headerlink" title="结构赋值"></a>结构赋值</h2><p>es6特有的语法糖，很好用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let a,b;</span><br><span class="line">  [a,b]=[1,2];</span><br><span class="line">  console.log(a,b);//1,2</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  let a,b;</span><br><span class="line">  (&#123;a,b&#125;=&#123;a:1,b:2&#125;)</span><br><span class="line">  console.log(a,b);//1,2</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  function f()&#123;</span><br><span class="line">    return [1,2]</span><br><span class="line">  &#125;</span><br><span class="line">  let a,b;</span><br><span class="line">  [a,b]=f();</span><br><span class="line">  console.log(a,b);//1,1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  let metaData=&#123;</span><br><span class="line">    title:&apos;abc&apos;,</span><br><span class="line">    test:[&#123;</span><br><span class="line">      title:&apos;test&apos;,</span><br><span class="line">      desc:&apos;description&apos;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">  let &#123;title:esTitle,test:[&#123;title:cnTitle&#125;]&#125;=metaData;</span><br><span class="line">  console.log(esTitle,cnTitle);//&apos;abc&apos;,&apos;test&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个三个块级作用域中是不同类型的结构赋值的声明方法，是不是特别神奇！大家直接用吧！<br>最好我模拟了从后台拿接口的场景。各位可以跟着套用!</p>
</blockquote>
<h2 id="RegExp的变化"><a href="#RegExp的变化" class="headerlink" title="RegExp的变化"></a>RegExp的变化</h2><p>我从三个方面来剖析ES5-ES6的变化。</p>
<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    // #构造函数#</span><br><span class="line">    let regex = new RegExp(&apos;xyz&apos;, &apos;i&apos;); //第一个参数是字符串，第二个是修饰符</span><br><span class="line">    let regex2 = new RegExp(/xyz/i); //第一个参数是正则表达式，不接受第二个参数，否则会报错</span><br><span class="line">    console.log(regex.test(&apos;xyz123&apos;), regex2.test(&apos;xyz123&apos;));</span><br><span class="line">    console.log(regex.test(&apos;xyZ123&apos;), regex2.test(&apos;xyZ123&apos;));</span><br><span class="line"></span><br><span class="line">    let regex3 = new RegExp(/abc/ig, &apos;i&apos;);</span><br><span class="line">    console.log(regex3.flags); //原有正则对象的修饰符是ig，它会被第二个参数i覆盖</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在ES5的时候regex3这种声明方法是会报错的因为，RegExp构造函数的参数是一个正则表达式的时候，ES5 不允许此时使用第二个参数添加修饰符！<br>ES6 改变了这种行为。<label style="color:orange">如果RegExp构造函数第一个参数是一个正则对象，那么可以使用第二个参数指定修饰符。而且，返回的正则表达式会忽略原有的正则表达式的修饰符，只使用新指定的修饰符。</label></p>
</blockquote>
<h3 id="字符串的正则方法"><a href="#字符串的正则方法" class="headerlink" title="字符串的正则方法"></a>字符串的正则方法</h3><p>字符串对象共有 4 个方法，可以使用正则表达式：match()、replace()、search()和split()。<br>ES6 将这 4 个方法，在语言内部全部调用RegExp的实例方法，从而做到所有与正则相关的方法，全都定义在RegExp对象上。</p>
<ul>
<li>String.prototype.match 调用 RegExp.prototype[Symbol.match]</li>
<li>String.prototype.replace 调用 RegExp.prototype[Symbol.replace]</li>
<li>String.prototype.search 调用 RegExp.prototype[Symbol.search]</li>
<li>String.prototype.split 调用 RegExp.prototype[Symbol.split]</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    let regex = new RegExp(&apos;xyz&apos;, &apos;ig&apos;);</span><br><span class="line">    console.log(regex.test(&apos;xyz0XYZ1xyz2&apos;), regex.exec(&apos;xyz0XYZ1xyz2&apos;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    // y修饰符</span><br><span class="line">    let s = &apos;bbbb_bbb_bb_b&apos;;</span><br><span class="line">    var a1 = /b+/g;</span><br><span class="line">    var a2 = /b+/y;</span><br><span class="line"></span><br><span class="line">    console.log(a1.exec(s), a2.exec(s)); // [&quot;bbbb&quot;],[&quot;bbbb&quot;]</span><br><span class="line">    console.log(a1.exec(s), a2.exec(s)); // [&quot;bbb&quot;],null</span><br><span class="line"></span><br><span class="line">    console.log(a1.sticky, a2.sticky); //表示是否开启了粘连模式</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    console.log(&apos;u修饰符&apos;,/^\uD83D/.test(&apos;\uD83D\uDC2A&apos;)); // true</span><br><span class="line">    console.log(&apos;u修饰符&apos;,/^\uD83D/u.test(&apos;\uD83D\uDC2A&apos;)); // false</span><br><span class="line">    // 大括号表示Unicode字符，只有加上u才能识别</span><br><span class="line">    console.log(/\u&#123;61&#125;/.test(&apos;a&apos;)); // false</span><br><span class="line">    console.log(/\u&#123;61&#125;/u.test(&apos;a&apos;)); // true</span><br><span class="line">    console.log(/\u&#123;20BB7&#125;/u.test(&apos;𠮷&apos;)); // true</span><br><span class="line">    // 点（.）字符不能识别码点大于0xFFFF的Unicode字符，必须加上u修饰符。</span><br><span class="line">    let s = &apos;𠮷&apos;;</span><br><span class="line">    console.log(&apos;大于0xFFFF的Unicode字符&apos;,/^.$/.test(s)); // false</span><br><span class="line">    console.log(&apos;使用u字符&apos;,/^.$/u.test(s)); // true</span><br><span class="line"></span><br><span class="line">    // 使用u修饰符后，所有量词都会正确识别大于码点大于0xFFFF的Unicode字符。</span><br><span class="line">    console.log(&apos;量词&apos;,/a&#123;2&#125;/.test(&apos;aa&apos;)); // true</span><br><span class="line">    console.log(&apos;量词&apos;,/a&#123;2&#125;/u.test(&apos;aa&apos;)); // true</span><br><span class="line">    console.log(&apos;量词&apos;,/𠮷&#123;2&#125;/.test(&apos;𠮷𠮷&apos;)); // false</span><br><span class="line">    console.log(&apos;量词&apos;,/𠮷&#123;2&#125;/u.test(&apos;𠮷𠮷&apos;)); // true</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    // #正则表达式中，点（.）是一个特殊字符，代表任意的单个字符，但是行终止符（line terminator character）除外</span><br><span class="line">    // U+000A 换行符（\n）</span><br><span class="line">    // U+000D 回车符（\r）</span><br><span class="line">    // U+2028 行分隔符（line separator）</span><br><span class="line">    // U+2029 段分隔符（paragraph separator）</span><br><span class="line">    // 只是一个提案目前还不支持</span><br><span class="line">    // let reg=/test.go/s;</span><br><span class="line">    // console.log(reg.test(&apos;test\ngo&apos;));</span><br><span class="line">    // console.log(reg.test(&apos;test\ngo&apos;));</span><br><span class="line">    console.log(&apos;s变通方法&apos;,/foo.bar/.test(&apos;foo\nbar&apos;));</span><br><span class="line">    console.log(&apos;s变通方法&apos;,/foo[^]bar/.test(&apos;foo\nbar&apos;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="今天的分享就到这！喜欢的话记得star哟！"><a href="#今天的分享就到这！喜欢的话记得star哟！" class="headerlink" title="今天的分享就到这！喜欢的话记得star哟！"></a><label style="yellow">今天的分享就到这！喜欢的话记得star哟！</label></h2>
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  <div>
    
  </div>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/background.jpg"
                alt="NoHomeMan" />
            
              <p class="site-author-name" itemprop="name">NoHomeMan</p>
              <p class="site-description motion-element" itemprop="description">NoHomeMan个人站，主要涉及前端知识共享、实践教程、前沿技术共同学习等方面</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/nohomeman" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">NoHomeMan</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      本站访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      本站总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  




  
    <script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cytP6voyy"></script>
  









  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === '') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("26j96igovo80kLIbtLsSlcOC-gzGzoHsz", "9fBpIghXic7fGqFVbXfsOOwf");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":70,"height":150},"mobile":{"show":false},"log":false});</script></body>
</html>
